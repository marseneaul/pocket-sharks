(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const p of a)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function o(a){const p={};return a.integrity&&(p.integrity=a.integrity),a.referrerPolicy&&(p.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?p.credentials="include":a.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function s(a){if(a.ep)return;a.ep=!0;const p=o(a);fetch(a.href,p)}})();const S=160,ee=144,kt=4,k={BLACK:"#0f0f0f",DARK:"#555555",LIGHT:"#aaaaaa",WHITE:"#f0f0f0"},ao=[k.BLACK,k.DARK,k.LIGHT,k.WHITE],ro=8,To=8,Gt=30,pe={ENEMY_SPRITE_X:108,ENEMY_SPRITE_Y:4,ENEMY_INFO_X:4,ENEMY_INFO_Y:8,PLAYER_SPRITE_X:4,PLAYER_SPRITE_Y:40,PLAYER_INFO_X:88,PLAYER_INFO_Y:48,TEXT_BOX_Y:96,TEXT_BOX_HEIGHT:48,HP_BAR_WIDTH:48,HP_BAR_HEIGHT:3,MENU_X:88};let ct,Ht,dt,_e;function xo(){if(ct=document.getElementById("game-canvas"),!ct)throw new Error("Canvas element not found");ct.width=S*kt,ct.height=ee*kt,Ht=ct.getContext("2d"),Ht.imageSmoothingEnabled=!1,dt=document.createElement("canvas"),dt.width=S,dt.height=ee,_e=dt.getContext("2d"),_e.imageSmoothingEnabled=!1}function be(){return _e}function no(){_e.fillStyle=k.WHITE,_e.fillRect(0,0,S,ee)}function Co(){Ht.drawImage(dt,0,0,S,ee,0,0,S*kt,ee*kt)}function ut(e,t,o,s,a){_e.fillStyle=ao[a],_e.fillRect(Math.floor(e),Math.floor(t),o,s)}function Ut(e,t,o,s,a){_e.strokeStyle=ao[a],_e.lineWidth=1,_e.strokeRect(Math.floor(e)+.5,Math.floor(t)+.5,o-1,s-1)}function yt(e,t,o,s){ut(e,t,o,s,3),Ut(e,t,o,s,0),Ut(e+1,t+1,o-2,s-2,1)}const Ro={A:[60,102,102,126,102,102,102,0],B:[124,102,102,124,102,102,124,0],C:[60,102,96,96,96,102,60,0],D:[120,108,102,102,102,108,120,0],E:[126,96,96,124,96,96,126,0],F:[126,96,96,124,96,96,96,0],G:[60,102,96,110,102,102,60,0],H:[102,102,102,126,102,102,102,0],I:[60,24,24,24,24,24,60,0],J:[30,12,12,12,12,108,56,0],K:[102,108,120,112,120,108,102,0],L:[96,96,96,96,96,96,126,0],M:[99,119,127,107,99,99,99,0],N:[102,118,126,126,110,102,102,0],O:[60,102,102,102,102,102,60,0],P:[124,102,102,124,96,96,96,0],Q:[60,102,102,102,102,60,14,0],R:[124,102,102,124,120,108,102,0],S:[60,102,96,60,6,102,60,0],T:[126,24,24,24,24,24,24,0],U:[102,102,102,102,102,102,60,0],V:[102,102,102,102,102,60,24,0],W:[99,99,99,107,127,119,99,0],X:[102,102,60,24,60,102,102,0],Y:[102,102,102,60,24,24,24,0],Z:[126,6,12,24,48,96,126,0],0:[60,102,110,118,102,102,60,0],1:[24,56,24,24,24,24,126,0],2:[60,102,6,12,48,96,126,0],3:[60,102,6,28,6,102,60,0],4:[6,14,30,102,127,6,6,0],5:[126,96,124,6,6,102,60,0],6:[60,102,96,124,102,102,60,0],7:[126,102,12,24,24,24,24,0],8:[60,102,102,60,102,102,60,0],9:[60,102,102,62,6,102,60,0]," ":[0,0,0,0,0,0,0,0],".":[0,0,0,0,0,24,24,0],",":[0,0,0,0,0,24,24,48],"!":[24,24,24,24,0,0,24,0],"?":[60,102,6,12,24,0,24,0],"-":[0,0,0,126,0,0,0,0],"/":[2,6,12,24,48,96,64,0],":":[0,24,24,0,24,24,0,0],"'":[24,24,24,0,0,0,0,0],"(":[12,24,48,48,48,24,12,0],")":[48,24,12,12,12,24,48,0],">":[0,96,48,24,48,96,0,0]};function Eo(e,t,o,s=0){const a=be(),p=Ro[e.toUpperCase()];if(!p)return;const m=[k.BLACK,k.DARK,k.LIGHT,k.WHITE];a.fillStyle=m[s];for(let O=0;O<8;O++){const w=p[O];for(let N=0;N<8;N++)w&128>>N&&a.fillRect(Math.floor(t)+N,Math.floor(o)+O,1,1)}}function A(e,t,o,s=0){let a=t;for(const p of e)Eo(p,a,o,s),a+=ro}function Dt(e){return e.length*ro}function ze(e,t,o,s,a=0){const p=Dt(e),m=t+Math.floor((o-p)/2);A(e,m,s,a)}function Ne(e,t,o,s,a=0){const p=Dt(e),m=t+o-p;A(e,m,s,a)}let de=null;function Lo(e,t,o,s){de={text:e,x:t,y:o,maxWidth:s,currentIndex:0,complete:!1}}function zt(){de&&!de.complete&&(de.currentIndex++,de.currentIndex>=de.text.length&&(de.complete=!0))}function bt(){return(de==null?void 0:de.complete)??!0}function io(){if(!de)return;const t=de.text.substring(0,de.currentIndex).split(" ");let o=de.x,s=de.y;const a=To+2;for(const p of t){const m=Dt(p+" ");o+m>de.x+de.maxWidth&&o!==de.x&&(o=de.x,s+=a),A(p+" ",o,s),o+=m}}const Ho={1:{front:["................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................",".............................................##.",".....................##....................#@##.","....................OOo..................#@o@#..","...................@oOo@.........##....#@oo#....","................###@@@@@###########..#@ooo#.....","...........###@@@@@@@@@ooooo@@@oooooooOOo#......",".......####@@@@@@oooooooooOOOOOOOOOOOOOO#.......","....###@@@@@ooooooOOOOOOOOOOOoOoO@#....@##......",".oo@ooooOOOOOOo@@oOOOOOOOOo@@#...........#......",".ooOOoOOOOOOOoo@@@@@oo..........................","..............@o@#@##...........................","...............##..##...........................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................"],back:["................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................",".##.............................................",".##@#....................##.....................","..#@o@#..................oOO....................","....#oo@#....##.........@oOo@...................",".....#ooo@#..###########@@@@@###................","......#oOOooooooo@@@ooooo@@@@@@@@@###...........",".......#OOOOOOOOOOOOOOooooooooo@@@@@@####.......","......##@....#@OoOoOOOOOOOOOOoooooo@@@@@###.....","......#...........@@oOOOOOOOOo@@oOOOOOOooo@oo...","..........................oo@@@@@oOOOOOOOoOOoo..","...........................##@#@o@..............","...........................##..##...............","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................"]},4:{front:["................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................",".....................@O.....................#@O.","....................###..................#@@@@@.","...................@@@##.......###.....#@@o@#...","..............#####@@@@#@@@@@@#@@###@@@ooo@#....","........####@@@@@oooooooooooooooooOOOOOO@#......","....####@@@@@@oooooooooOOOOOOOOOOooOOOo@#.......",".@oooooooooooooOOOOOOOOOOOoo@@..@#.....###......","..OOOOOOOOOOO@@@@OOOOOOOo.###...................","..............####..............................","...............###..............................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................"],back:["................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................",".O@#.....................O@.....................",".@@@@@#..................###....................","...#@oo@@#.....###.......##@@@..................","....#@ooo@@@###@@#@@@@@@#@@@@#####..............","......#@OOOOOOooooooooooooooooo@@@@@####........",".......#@oOOOooOOOOOOOOOOooooooooo@@@@@@####....","......###.....#@..ooOOOOOOOOOOOOoooooooooooo@...","...................###.oOOOOOO@@@@OOOOOOOOOOO...","..............................####..............","..............................###...............","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................"]},7:{front:["................................","................................","................................","...............####.............","..............#@@@@#............",".............#@@@@@@##...........","............#@@@@@@@@##..........","##.........#@@@@@@@@@@##.........","@##.......#@@@@@@@@@@@@##........","@@##.....##@@@@oo@@@@@@@@#.......","@@@##...##@@@o##o@@@@@@@@##......","@@@@##.#@@@@@@@@@@@@@@@@@@@##....","@@@@@###@@@@@@@@@@@@@@@@@@@@@@##.","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","..##@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","...##@@@@@@@@@@@@@@@@@@@@@@@@@@@#","....##@@@@@@@@@@@@@@@@@@@@@@@@@@#",".....##@@@@@@@@@@@@@@@@@@@@@@@@@#","......##@@@@@@@@@@@@@@@@##@@@@@#.",".......###@@@@@@@@@@@@@#...####..",".........####@@@@@@@@@#..........","............####@@@@@#...........","..............###@@##............","................####.............","................................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................................",".............####...............","............#@@@@#..............","...........##@@@@@@#............","..........##@@@@@@@@#...........",".........##@@@@@@@@@@#.........##","........##@@@@@@@@@@@@#.......##@",".......#@@@@@@@@oo@@@@##.....##@@","......##@@@@@@@@o##o@@@##...##@@@","....##@@@@@@@@@@@@@@@@@@@#.##@@@@",".##@@@@@@@@@@@@@@@@@@@@@@###@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@##..","#@@@@@@@@@@@@@@@@@@@@@@@@@@@##...","#@@@@@@@@@@@@@@@@@@@@@@@@@@##....","#@@@@@@@@@@@@@@@@@@@@@@@@@##.....",".#@@@@@##@@@@@@@@@@@@@@@@##......","..####...#@@@@@@@@@@@@@###.......","..........#@@@@@@@@@####.........","...........#@@@@@####............","............##@@###..............",".............####................","................................","................................","................................","................................","................................","................................","................................"]},10:{front:["................................","................................","................................","................................","................................","...............###..............","..............#@@@#.............",".............#@@@@@#............","............#@@@@@@@#...........","##.........#@@@@@@@@@#..........","@##.......#@@@@@@@@@@@#.........","@@##.....#@@@@@@@@@@@@@#........","@@@#....#@@@@@@@@@@@@@@@#.......","@@@@#..#@@@@@@@@@@@@@@@@@@#.....","@@@@@##@@@@@@@@@@@@@@@@@@@@@#...","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.",".@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","...@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","....@@@@@@@@@@@@@@@@@@@@@@@@@@@#",".....#@@@@@@@@@@@@@@@@@@@@@@@@@#","#o....#@@@@@@@@@@@@@@@@@@#@@@@#.","@#.....##@@@@@@@@@@@@@@@#..###..","@@#......###@@@@@@@@@@@#........","@#.........####@@@@@@#..........","#.............##@@@@##..........","................####............","................................","................................","................................","................................","................................"],back:["................................","................................","................................","................................","................................","..............###...............",".............#@@@#..............","............#@@@@@#.............","...........#@@@@@@@#............","..........#@@@@@@@@@#.........##",".........#@@@@@@@@@@@#.......##@","........#@@@@@@@@@@@@@#.....##@@",".......#@@@@@@@@@@@@@@@#....#@@@",".....#@@@@@@@@@@@@@@@@@@#..#@@@@","...#@@@@@@@@@@@@@@@@@@@@@##@@@@@",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@...","#@@@@@@@@@@@@@@@@@@@@@@@@@@@....","#@@@@@@@@@@@@@@@@@@@@@@@@@#.....",".#@@@@#@@@@@@@@@@@@@@@@@@#....o#","..###..#@@@@@@@@@@@@@@@##.....#@","........#@@@@@@@@@@@###......#@@","..........#@@@@@@####.........#@","..........##@@@@##.............#","............####................","................................","................................","................................","................................","................................"]},13:{front:["................................","................................","................................","................................","................................","................................","...............##..............","..............#@@#.............",".............#@@@@#............","#...........#@@@@@@#...........","##.........#@@@@@@@@#..........","@##.......#@@@@oo@@@@#.........","@@#......#@@@@o##o@@@@#........","@@@#....#@@@@@@@@@@@@@@@#......","@@@@#..#@@@@@@@@@@@@@@@@@@#....","@@@@@##@@@@@@@@@@@@@@@@@@@@@#..","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#",".@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","..@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","...@@@@@@@@@@@@@@@@@@@@@@@@@@@#","....#@@@@@@@@@@@@@@@@@@@#@@@@#.",".....#@@@@@@@@@@@@@@@@##..###..","......##@@@@@@@@@@@@##.........","........###@@@@@@###...........","..........#####@@#.............","............####...............","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................................","................................","................................","................................","..............##...............",".............#@@#..............","............#@@@@#..............","...........#@@@@@@#...........#","..........#@@@@@@@@#.........##",".........#@@@@oo@@@@#.......##@","........#@@@@o##o@@@@#......#@@","......#@@@@@@@@@@@@@@@#....#@@@","....#@@@@@@@@@@@@@@@@@@#..#@@@@","..#@@@@@@@@@@@@@@@@@@@@@##@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@..","#@@@@@@@@@@@@@@@@@@@@@@@@@@@...",".#@@@@#@@@@@@@@@@@@@@@@@@@#....","..###..##@@@@@@@@@@@@@@@@#.....",".........##@@@@@@@@@@@@##......","...........###@@@@@@###........",".............#@@#####..........","..............####.............","................................","................................","................................","................................","................................","................................"]},2:{front:["................................","................................","................................","..............####..............",".............#@@@@#.............","............#@@@@@@#............","...........#@@@@@@@@#...........","##........#@@@@@@@@@@#..........","@##......#@@@@@@@@@@@@#.........","@@##....#@@@@@@@@@@@@@@#........","@@@##..#@@@@oo@@@@@@@@@@#.......","@@@@##.#@@@o##o@@@@@@@@@@#......","@@@@@##@@@@@@@@@@@@@@@@@@@@#....","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#",".@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","...@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","....#@@@@@@@@@@@@@@@@@@@@@@@@@#.",".....#@@@@@@@@@@@@@@@@@##@@@@#..","......##@@@@@@@@@@@@@@#...###...","........###@@@@@@@@@@#..........","..........####@@@@@@#...........","............###@@@@#............","..............####..............","................................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................................","..............####..............",".............#@@@@#.............","............#@@@@@@#............","...........#@@@@@@@@#...........","..........#@@@@@@@@@@#........##",".........#@@@@@@@@@@@@#......##@","........#@@@@@@@@@@@@@@#....##@@",".......#@@@@@@@@@@oo@@@@#..##@@@","......#@@@@@@@@@@o##o@@@#.##@@@@","....#@@@@@@@@@@@@@@@@@@@@##@@@@@",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@...",".#@@@@@@@@@@@@@@@@@@@@@@@@@#....","..#@@@@##@@@@@@@@@@@@@@@@@#.....","...###...#@@@@@@@@@@@@@@##......","..........#@@@@@@@@@@###........","...........#@@@@@@####..........","............#@@@@###............","..............####..............","................................","................................","................................","................................","................................","................................","................................"]},3:{front:["................................","............#####...............","...........#@@@@@#..............","..........#@@@@@@@#.............",".........#@@@@@@@@@#............","###.....#@@@@@@@@@@@#...........","@###...#@@@@@@@@@@@@@#..........","@@###.#@@@@@@@@@@@@@@@#.........","@@@###@@@@@@@@@@@@@@@@@@#.......","@@@@##@@@@oo@@@@@@@@@@@@@#......","@@@@@#@@@o##o@@@@@@@@@@@@@@#....","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#",".@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","..#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","...#@@@@@@@@@@@@@@@@@@@@@@@@@@@@","....#@@@@@@@@@@@@@@@@@@@@@@@@@#.",".....#@@@@@@@@@@@@@@@@@@@@@@@@#.","......#@@@@@@@@@@@@@@@@##@@@#...",".......##@@@@@@@@@@@@@#...###...",".........###@@@@@@@@@#..........","...........####@@@@@#...........",".............###@@@#............","...............####.............","................##..............","................................","................................","................................","................................","................................","................................","................................"],back:["................................","...............#####............","..............#@@@@@#...........",".............#@@@@@@@#..........","............#@@@@@@@@@#.........","...........#@@@@@@@@@@@#.....###","..........#@@@@@@@@@@@@@#...###@",".........#@@@@@@@@@@@@@@@#.###@@",".......#@@@@@@@@@@@@@@@@@@###@@@","......#@@@@@@@@@@@@@oo@@@@##@@@@","....#@@@@@@@@@@@@@@o##o@@@#@@@@@",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.","...#@@@##@@@@@@@@@@@@@@@@@@@@#..","...###...#@@@@@@@@@@@@@@@@@##...","..........#@@@@@@@@@@@@@###.....","...........#@@@@@@@####.........","............#@@@###.............",".............####...............","..............##................","................................","................................","................................","................................","................................","................................","................................"]},5:{front:["................................","................................","................................","..............OOOO..............",".............O@@@@O.............","............#@@@@@@#............","...........#@@@@@@@@#...........","OO........#@@@@@@@@@@#..........","@OO......#@@@@@@@@@@@@O.........","@@OO....#@@@@@@@@@@@@@@O........","@@@OO..#@@@@oo@@@@@@@@@@O.......","@@@@OO.#@@@o##o@@@@@@@@@@O......","@@@@@OO@@@@@@@@@@@@@@@@@@@@O....","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@O.","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@O",".@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@O","..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@O","...@@@@@@@@@@@@@@@@@@@@@@@@@@@@O","....O@@@@@@@@@@@@@@@@@@@@@@@@@O.",".....O@@@@@@@@@@@@@@@@@OO@@@@O..","......OO@@@@@@@@@@@@@@O...OOO...","........OOO@@@@@@@@@@O..........","..........OOOO@@@@@@O...........","............OOO@@@@O............","..............OOOO..............","................................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................................","..............OOOO..............",".............O@@@@O.............","............#@@@@@@#............","...........#@@@@@@@@#...........","..........#@@@@@@@@@@#........OO",".........O@@@@@@@@@@@@#......OO@","........O@@@@@@@@@@@@@@#....OO@@",".......O@@@@@@@@@@oo@@@@#..OO@@@","......O@@@@@@@@@@o##o@@@#.OO@@@@","....O@@@@@@@@@@@@@@@@@@@@OO@@@@@",".O@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","O@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","O@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.","O@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..","O@@@@@@@@@@@@@@@@@@@@@@@@@@@@...",".O@@@@@@@@@@@@@@@@@@@@@@@@@O....","..O@@@@OO@@@@@@@@@@@@@@@@@O.....","...OOO...O@@@@@@@@@@@@@@OO......","..........O@@@@@@@@@@OOO........","...........O@@@@@@OOOO..........","............O@@@@OOO............","..............OOOO..............","................................","................................","................................","................................","................................","................................","................................"]},6:{front:["...........OOOOO................","..........O@@@@@O...............",".........#@@@@@@@#..............","........#@@@@@@@@@#.............","OOO....#@@@@@@@@@@@#............","@OOO..#@@@@@@@@@@@@@O...........","@@OOO#@@@@@@@@@@@@@@@@O.........","@@@OO@@@@@@@@@@@@@@@@@@@O.......","@@@@O@@@@oo@@@@@@@@@@@@@@O......","@@@@@@@@o##o@@@@@@@@@@@@@@@O....","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@OO.","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@OO",".@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","...@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","....O@@@@@@@@@@@@@@@@@@@@@@@@@O.",".....O@@@@@@@@@@@@@@@@@@@@@@@@O.","......O@@@@@@@@@@@@@@@@OO@@@O...",".......OO@@@@@@@@@@@@@O...OOO...",".........OOO@@@@@@@@@O..........","...........OOOO@@@@@O...........",".............OOO@@@O............","...............OOOO.............","................OO..............","................................","................................","................................","................................","................................","................................","................................","................................"],back:["................OOOOO...........","...............O@@@@@O..........","..............#@@@@@@@#.........",".............#@@@@@@@@@#........","............#@@@@@@@@@@@#....OOO","...........O@@@@@@@@@@@@@#..OOO@",".........O@@@@@@@@@@@@@@@@#OOO@@",".......O@@@@@@@@@@@@@@@@@@@OO@@@","......O@@@@@@@@@@@@oo@@@@@@O@@@@","....O@@@@@@@@@@@@@o##o@@@@@@@@@@",".OO@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","OO@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@...",".O@@@@@@@@@@@@@@@@@@@@@@@@@O....",".O@@@@@@@@@@@@@@@@@@@@@@@@O.....","...O@@@OO@@@@@@@@@@@@@@@@O......","...OOO...O@@@@@@@@@@@@@OO.......","..........O@@@@@@@@@OOO.........","...........O@@@@@OOOO...........","............O@@@OOO.............",".............OOOO...............","..............OO................","................................","................................","................................","................................","................................","................................","................................","................................"]},8:{front:["................................","................................","..............####..............",".............#@@@@##............","............#@@@@@@@@#...........","##.........#@@@@@@@@@@##.........","@##.......#@@@@@@@@@@@@##........","@@##.....##@@@@oo@@@@@@@@##......","@@@##...##@@@o##o@@@@@@@@@@#.....","@@@@##.#@@@@@@@@@@@@@@@@@@@@@##..","@@@@@###@@@@@@@@@@@@@@@@@@@@@@@@#","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#",".##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","..##@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","...##@@@@@@@@@@@@@@@@@@@@@@@@@@@#","....##@@@@@@@@@@@@@@@@@@@@@@@@##.",".....##@@@@@@@@@@@@@@@@@##@@##...","......###@@@@@@@@@@@@@@#...###...","........####@@@@@@@@@@#..........","..........####@@@@@@##...........","............###@@###.............","..............####...............","................................","................................","................................","................................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","..............####..............","............##@@@@#.............","...........#@@@@@@@@#............","...........##@@@@@@@@@@#.........##","..........##@@@@@@@@@@@@#.......##@","........##@@@@@@@@oo@@@@##.....##@@",".......#@@@@@@@@@@o##o@@@##...##@@@","....##@@@@@@@@@@@@@@@@@@@@@#.##@@@@","..#@@@@@@@@@@@@@@@@@@@@@@@@###@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@##.","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@##..","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@##...",".##@@@@@@@@@@@@@@@@@@@@@@@@@@##....","...##@@##@@@@@@@@@@@@@@@@@@@##.....","...###...#@@@@@@@@@@@@@@@@###......","..........#@@@@@@@@@@@@####........","...........##@@@@@@@@####..........",".............###@@@@###............","..............####.................","................................","................................","................................","................................","................................","................................","................................","................................","................................","................................"]},9:{front:["................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................",".................#oO.........................oO.","................####......................#@@@O.","................@@##....................#@@@##..",".............@@@@#############..###...#@oo@#....","........@@@@@@@@@@@@@@@@@@@@@@@@ooooooooo##.....",".....###@@@@@@@@@@ooooooooooOOOOOOOOOOOo#.......",".@@@@@@@@oooooooooooooOOOOOOOOOOOo@...Oo##......",".oooOOOOOOOo@@ooOOOOOOOOOOooo..........@#oO.....","....OOOOOOOoo####OOOO....................O......","............oo###...............................",".............o####..............................","................#oO.............................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................"],back:["................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................",".Oo.........................Oo#.................",".O@@@#......................####................","..##@@@#....................##@@................","....#@oo@#...###..#############@@@@.............",".....##ooooooooo@@@@@@@@@@@@@@@@@@@@@@@@........",".......#oOOOOOOOOOOOoooooooooo@@@@@@@@@@###.....","......##oO...@oOOOOOOOOOOOooooooooooo@@@@@@@@...",".....Oo#@..........oooOOOOOOOOOOoo@@oOOOOOOooo..","......O....................OOOO####ooOOOOOO.....","...............................###oo............","..............................####o.............",".............................Oo#................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................"]},11:{front:["................................","................................","................................","...............###..............","..............#@@@#.............",".............#@@@@@#............","............#@@@@@@@#...........","##.........#@@@@@@@@@#..........","@##.......#@@@@@@@@@@@#.........","@@##.....#@@@@@@@@@@@@@#........","@@@#....#@@@@@@@@@@@@@@@#.......","@@@@#..#@@@@@@@@@@@@@@@@@@#.....","@@@@@##@@@@@@@@@@@@@@@@@@@@@#...","@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.",".@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","...@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","....@@@@@@@@@@@@@@@@@@@@@@@@@@@#",".....#@@@@@@@@@@@@@@@@@@@@@@@@@#","o.....#@@@@@@@@@@@@@@@@@@#@@@@#.","@o.....##@@@@@@@@@@@@@@@#..###..","@@#......###@@@@@@@@@@@#........","@#.........####@@@@@@#..........","#.............##@@@@##..........","................####............","................................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................................","..............###...............",".............#@@@#..............","............#@@@@@#.............","...........#@@@@@@@#............","..........#@@@@@@@@@#.........##",".........#@@@@@@@@@@@#.......##@","........#@@@@@@@@@@@@@#.....##@@",".......#@@@@@@@@@@@@@@@#....#@@@",".....#@@@@@@@@@@@@@@@@@@#..#@@@@","...#@@@@@@@@@@@@@@@@@@@@@##@@@@@",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@...","#@@@@@@@@@@@@@@@@@@@@@@@@@@@....","#@@@@@@@@@@@@@@@@@@@@@@@@@#.....",".#@@@@#@@@@@@@@@@@@@@@@@@#.....o","..###..#@@@@@@@@@@@@@@@##.....o@","........#@@@@@@@@@@@###......#@@","..........#@@@@@@####.........#@","..........##@@@@##.............#","............####................","................................","................................","................................","................................","................................","................................","................................"]},12:{front:["................................","................................","................................","................................","................................","..............##................",".............#oo#...............","............#oooo#..............","...........#oooooo#.............","..........#oooooooo#............",".........#oooooooooo#...........","........#oooooooooooo#..........",".......#oooooooooooooo#.........","......#ooooo@@oooooooo#.........",".....#oooo@@..@@oooooo#.........","....#ooooo@@..@@ooooooo#........","....#oooooo@@@@oooooooo#........",".....#oooooooooooooooo#o........","......#ooooooooooooo##.o........",".......#oooooooooooo#..o........","........#oooooooooo#...o........",".........##oooooo##...o.........","...........##oo##....o..........",".............###....o...........","..............#....o............","................................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................................","................................","................................","................##..............","...............#oo#.............","..............#oooo#............",".............#oooooo#...........","............#oooooooo#..........","...........#oooooooooo#.........","..........#oooooooooooo#........",".........#oooooooooooooo#.......",".........#oooooooooo@@ooo#......",".........#ooooooooo@@..@@o#.....","........#ooooooooo@@..@@ooo#....","........#oooooooooo@@@@ooooo#...","........o#oooooooooooooooooo#...","........o.##ooooooooooooooo#....","........o..#oooooooooooooo#.....","........o...#oooooooooooo#......",".........o...##oooooooo##.......","..........o....##oooo##.........","...........o....###.............","............o....#..............","................................","................................","................................","................................","................................","................................","................................"]},14:{front:["................................","................................","................................","................................","................................","................................","..........#########.............",".........#@@@@@@@@@#............","........#@@@@@@@@@@@#...........",".......#@@@@@@@@@@@@@#..........","......#@@@@@@@@@@@@@@@#.........",".....#@@@@@o@@o@@@@@@@@#........","....#@@@@@@@@@@@@@@@@@@@#.......","...#@@@@@@@@@@@@@@@@@@@@@#......","..#@@@@@@@@@@@@@@@@@@@@@@@#.....",".#@@@@@@@@@@@@@@@@@@@@@@@@@#....","#@@@@@@@@@@@@@@@@@@@@@@@@@@@#...",".#@@@@@@@@@@@@@@@@@@@@@@@@@#....","..#@@@@@@@@@@@@@@@@@@@@@@@#.....","...##@@@@@@@@@@@@@@@@@@@##......",".....###@@@@@@@@@@@@@###........",".......####@@@@@@@####..........","..........###@@@###.............","............#@@@#...............",".............#@#................","..............#.................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................................","................................","................................","................................",".............#########..........","............#@@@@@@@@@#.........","...........#@@@@@@@@@@@#........","..........#@@@@@@@@@@@@@#.......",".........#@@@@@@@@@@@@@@@#......","........#@@@@@@@@o@@o@@@@@#.....",".......#@@@@@@@@@@@@@@@@@@@#....","......#@@@@@@@@@@@@@@@@@@@@@#...",".....#@@@@@@@@@@@@@@@@@@@@@@@#..","....#@@@@@@@@@@@@@@@@@@@@@@@@@#.","...#@@@@@@@@@@@@@@@@@@@@@@@@@@@#","....#@@@@@@@@@@@@@@@@@@@@@@@@@#.",".....#@@@@@@@@@@@@@@@@@@@@@@@#..","......##@@@@@@@@@@@@@@@@@@@##...","........###@@@@@@@@@@@@@###.....","..........####@@@@@@@####.......",".............###@@@###..........","...............#@@@#............","................#@#.............","...............#................","................................","................................","................................","................................","................................","................................"]},15:{front:["................................","................................","................................","................................","..............##................",".............#@@#...............","............#@@@@#..............","...........#@@@@@@#.............","..........#@@@O@@@@#............",".........#@@@@@@@@@@#...........","........#@@@O@@@@O@@@#..........",".......#@@@@@@@@@@@@@@#.........","......#@@@@@@@@@@@@@@@@#........",".....#@@@@oO@@@@@@@O@@@@#.......","....#@@@@o..o@@@@@@@@@@@@#......","...#@@@@@o..o@@@O@@@@@@@@#......","...#@@@@@@oo@@@@@@@@@@@@@@#.....","....#@@@@@@@@@O@@@@@@@@@@@#.....",".....#@@@@@@@@@@@@@@@@@O#@......","......#@@@@@@@@@@@@@@@@#.@......",".......#@@@O@@@@@@@@@@#..@......","........#@@@@@@@@@@@@#..@.......",".........##@@@@O@@@##..@........","...........##@@@@##...@.........",".............####....@..........","................................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................................","................................","................##..............","...............#@@#.............","..............#@@@@#............",".............#@@@@@@#...........","............#@@@@O@@@#..........","...........#@@@@@@@@@@#.........","..........#@@@O@@@@O@@@#........",".........#@@@@@@@@@@@@@@#.......","........#@@@@@@@@@@@@@@@@#......",".......#@@@@O@@@@@@@Oo@@@@#.....","......#@@@@@@@@@@@@o..o@@@@#....","......#@@@@@@@@O@@@o..o@@@@@#...",".....#@@@@@@@@@@@@@@oo@@@@@@#...",".....#@@@@@@@@@@@O@@@@@@@@@#....","......@#O@@@@@@@@@@@@@@@@@#.....","......@.#@@@@@@@@@@@@@@@@#......","......@..#@@@@@@@@@@O@@@#.......",".......@..#@@@@@@@@@@@@#........","........@..##@@@O@@@@##.........",".........@...##@@@@##...........","..........@....####.............","................................","................................","................................","................................","................................","................................","................................"]},19:{front:["................................","................................",".............##.................","............#@@#................","...........#@@@@#...............","..........#@@@@@@#..............",".........#@@@@@@@@#.............","........#@@@@@@@@@@#............",".......#@@@@@@@@@@@@##..........","......#@@@@@@@@@@@@@@@@#........",".....#@@@@@@@@@@@@@@@@@@#.......","....#@@@@@@@@@@@@@@@@@@@@@#.....","...#@@@@@@@@@@@@@@@@@@@@@@@@#...","..#@@@@@oo@@@@@@@@@@@@@@@@@@@#..",".#@@@@@o..o@@@@@@@@@@@@@@@@@@#..",".#@@@@@@oo@@@@@@@@@@@@@@@@@@@#..","..#@@@@@@@@@@@@@@@@@@@@@@@@##...","...#@@@@@@@@@@@@@@@@@@@@@##.@...","....#@@@@@@@@@@@@@@@@@@##...@...",".....##@@@@@@@@@@@@@@##.....@...",".......##@@@@@@@@@@##......@....",".........###@@@@###.......@.....","...........####@@........@......",".............##@@.......@.......","..............#@@......@........","...............##.....@.........","................................","................................","................................","................................","................................","................................"],back:["................................","................................",".................##.............","................#@@#............","...............#@@@@#...........","..............#@@@@@@#..........",".............#@@@@@@@@#.........","............#@@@@@@@@@@#........","..........##@@@@@@@@@@@@#.......","........#@@@@@@@@@@@@@@@@#......",".......#@@@@@@@@@@@@@@@@@@#.....",".....#@@@@@@@@@@@@@@@@@@@@@#....","...#@@@@@@@@@@@@@@@@@@@@@@@@#...","..#@@@@@@@@@@@@@@@@@@@@@oo@@@#..","..#@@@@@@@@@@@@@@@@@@@@o..o@@@#.","..#@@@@@@@@@@@@@@@@@@@@@oo@@@@#.","...##@@@@@@@@@@@@@@@@@@@@@@@@#..","...@.##@@@@@@@@@@@@@@@@@@@@@#...","...@...##@@@@@@@@@@@@@@@@@@#....","...@.....##@@@@@@@@@@@@@@##.....","....@......##@@@@@@@@@@##.......",".....@.......###@@@@###.........","......@........@@####...........",".......@.......@@##.............","........@......@@#..............",".........@.....##...............","................................","................................","................................","................................","................................","................................"]},20:{front:["............###.................","...........#@@@#................","..........#@@@@@#...............",".........#@@@@@@@#..............","........#@@@@@@@@@#.............",".......#@@@@@@@@@@@#............","......#@@@@@@@@@@@@@#...........",".....#@@@@@@@@@@@@@@@@#.........","....#@@@@@@@@@@@@@@@@@@#........","...#@@@@@@@@@@@@@@@@@@@@@#......","..#@@@@@ooo@@@@@@@@@@@@@@@@#....",".#@@@@@o...o@@@@@@@@@@@@@@@@@#..",".#@@@@@@ooo@@@@@@@@@@@@@@@@@@@#.","..#@@@@@@@@@@@@@@@@@@@@@@@@@@#..","...#@@@@@@@@@@@@@@@@@@@@@@@@#...","....#@@@@@@@@@@@@@@@@@@@@@@#....",".....#@@@@@@@@@@@@@@@@@@@#......","......#@@@@@@@@@@@@@@@@#........",".......#@@@@@@@@@@@@@#..........","........##@@@@@@@@@##...........","..........##@@@@@##.............","............#@@@@#..............",".............#@@@#..............","..............#@@#..............","...............#@#..............","................##..............","................#@..............",".................@..............",".................@..............","..................@.............","..................@.............","...................@............"],back:[".................###............","................#@@@#...........","...............#@@@@@#..........","..............#@@@@@@@#.........",".............#@@@@@@@@@#........","............#@@@@@@@@@@@#.......","...........#@@@@@@@@@@@@@#......",".........#@@@@@@@@@@@@@@@@#.....","........#@@@@@@@@@@@@@@@@@@#....","......#@@@@@@@@@@@@@@@@@@@@@#...","....#@@@@@@@@@@@@@@@@@@ooo@@@#..","..#@@@@@@@@@@@@@@@@@@@o...o@@@#.",".#@@@@@@@@@@@@@@@@@@@@@ooo@@@@#.","..#@@@@@@@@@@@@@@@@@@@@@@@@@@#..","...#@@@@@@@@@@@@@@@@@@@@@@@@#...","....#@@@@@@@@@@@@@@@@@@@@@@#....","......#@@@@@@@@@@@@@@@@@@@#.....","........#@@@@@@@@@@@@@@@@#......","..........#@@@@@@@@@@@@@#.......","...........##@@@@@@@@@##........",".............##@@@@@##..........","..............#@@@@#............","..............#@@@#.............","..............#@@#..............","..............#@#...............","..............##................","..............@#................","..............@.................","..............@.................",".............@.................",".............@.................","............@.................."]},24:{front:["................................","................................","..............###...............",".............#@@@#..............","............#@@@@@#.............","...........#@@@@@@@#............","..........#@@@@@@@@@#...........",".........#@@@@@@@@@@@#..........","........#@@@@@@@@@@@@@#.........",".......#@@@@@@@@@@@@@@@#........","......#@@@@@@@@@@@@@@@@#........",".....#@@@@@@@@@@@@@@@@@@#.......","....#@@@@o@@@@@@@@@@@@@@#.......","...#@@@@o.@@@@@@@@@@@@@@@#......","..#@@@@@o.@@@@@@@@@@@@@@@@#.....",".#@@@@@@o@@@@@@@@@@@@@@@@@@#....",".#@@###ooo###@@@@@@@@@@@@@@#....",".#@@#.......#@@@@@@@@@@@@@@@#...","..###.......###@@@@@@@@@@@@#@...","...#@@@@@@@@@#@@@@@@@@@@@@@#.@..","....#@@@@@@@#@@@@@@@@@@@@##..@..",".....#######@@@@@@@@@@@@#...@...","...........#@@@@@@@@@@@#....@...","............##@@@@@@@##....@....","..............###@###.....@.....","................###......@......","................................","................................","................................","................................","................................","................................"],back:["................................","................................","...............###..............","..............#@@@#.............",".............#@@@@@#............","............#@@@@@@@#...........","...........#@@@@@@@@@#..........","..........#@@@@@@@@@@@#.........",".........#@@@@@@@@@@@@@#........","........#@@@@@@@@@@@@@@@#.......","........#@@@@@@@@@@@@@@@@#......",".......#@@@@@@@@@@@@@@@@@@#.....",".......#@@@@@@@@@@@@@@@@o@@#....","......#@@@@@@@@@@@@@@@@@.o@@#...",".....#@@@@@@@@@@@@@@@@@@.o@@@#..","....#@@@@@@@@@@@@@@@@@@@@o@@@@#.","....#@@@@@@@@@@@@@@###ooo###@@#.","...#@@@@@@@@@@@@@@@#.......#@@#.","...@#@@@@@@@@@@@@@###.......###.","..@.#@@@@@@@@@@@@@#@@@@@@@@@#...","..@..##@@@@@@@@@@@@#@@@@@@@#....","...@...#@@@@@@@@@@@@#######.....","...@....#@@@@@@@@@@@#...........","....@....##@@@@@@@##............",".....@.....###@###..............","......@......###................","................................","................................","................................","................................","................................","................................"]},25:{front:["................................","................................",".#.#.#.#.###....................","#@#@#@#@@@@@#...................",".#.#.#.#@@@@@@#.................","........#@@@@@@#................",".........#@@@@@@#...............","..........#@@@@@@#..............","...........#@@@@@@#.............","............#@@@@@@#............",".............#@@@@@@#...........","..............#@@@@@@#..........","...........#@@@@@@@@@@@#........","..........#@@@@o@@@@@@@@@#......",".........#@@@@@.@@@@@@@@@@#.....","........#@@@@@@o@@@@@@@@@@#.....",".......#@@@@@@@@@@@@@@@@@@@#....","......#@@@@@@@@@@@@@@@@@@@@@#...",".......#@@@@@@@@@@@@@@@@@@#@....","........#@@@@@@@@@@@@@@@@#.@....",".........#@@@@@@@@@@@@@@#..@....","..........##@@@@@@@@@@##...@....","............##@@@@@@##....@.....","..............####.......@......","................................","................................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","....................###.#.#.#.#.","...................#@@@@@#@#@#@#",".................#@@@@@@#.#.#.#.","................#@@@@@@#........","...............#@@@@@@#.........","..............#@@@@@@#..........",".............#@@@@@@#...........","............#@@@@@@#............","...........#@@@@@@#.............","..........#@@@@@@#..............","........#@@@@@@@@@@@#...........","......#@@@@@@@@@o@@@@#..........",".....#@@@@@@@@@@.@@@@@#.........",".....#@@@@@@@@@@o@@@@@@#........","....#@@@@@@@@@@@@@@@@@@@#.......","...#@@@@@@@@@@@@@@@@@@@@@#......","....@#@@@@@@@@@@@@@@@@@@#.......","....@.#@@@@@@@@@@@@@@@@#........","....@..#@@@@@@@@@@@@@@#.........","....@...##@@@@@@@@@@##..........",".....@....##@@@@@@##............","......@.......####..............","................................","................................","................................","................................","................................","................................","................................","................................"]},27:{front:["................................","................................","................................","................................","......#####........#####........",".....#@@@@@#......#@@@@@#.......","....#@@@@@@@#....#@@@@@@@#......","...#@@@@@@@@@#..#@@@@@@@@@#.....","..#@@@@@@@@@@@##@@@@@@@@@@@#....",".#@@@@@@@@@@@@@@@@@@@@@@@@@#....","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@#..","#@@@@@@@@@@o@@@@@@o@@@@@@@@@@@#.",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","..#@@@@@@@@@@@@@@@@@@@@@@@@@@@#.","...#@@@@@@@@@@@@@@@@@@@@@@@@@#..","....##@@@@@@@@@@@@@@@@@@@@@##...","......###@@@@@@@@@@@@@@@###.....","........####@@@@@@@@@####.......","..........#####@@@#####.........","............###@@@###...........","..............#@@@#.............","...............#@#..............","................#...............","................................","................................","................................","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................................","................................","........#####........#####......",".......#@@@@@#......#@@@@@#.....","......#@@@@@@@#....#@@@@@@@#....",".....#@@@@@@@@@#..#@@@@@@@@@#...","....#@@@@@@@@@@@##@@@@@@@@@@@#..","....#@@@@@@@@@@@@@@@@@@@@@@@@@#.","..#@@@@@@@@@@@@@@@@@@@@@@@@@@@@#",".#@@@@@@@@@@@o@@@@@@o@@@@@@@@@@@","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@#..","..#@@@@@@@@@@@@@@@@@@@@@@@@@#...","...##@@@@@@@@@@@@@@@@@@@@@##....",".....###@@@@@@@@@@@@@@@###......",".......####@@@@@@@@@####........",".........#####@@@#####..........","...........###@@@###............",".............#@@@#..............","..............#@#...............","...............#................","................................","................................","................................","................................","................................","................................","................................","................................","................................"]},29:{front:["................................","................................","..............##................",".............#@@#...............","............#@@@@#..............","...........#@@@@@@#.............","..........#@@@@@@@@#............",".........#@@@@@@@@@@#...........","........#@@@@@@@@@@@@#..........",".......#@@@@@@@@@@@@@@#.........","......#@@@@@@@@@@@@@@@@#........",".....#@@@@@@@@@@@@@@@@@@#.......","....#@@@@o@@@@@@@@@@@@@@@#......","...#@@@@@.@@@@@@@@@@@@@@@@#.....","..#@@@@@@o@@@@@@@@@@@@@@@@@#....",".#@@@@@@@@@@@@@@@@@@@@@@@@@@#...",".#@#####@@@@@@@@@@@@@@@@@@@@@#..",".#@#ooo#@@@@@@@@@@@@@@@@@@@@@#..","..#@#o#@@@@@@@@@@@@@@@@@@@@#@...","...###@@@@@@@@@@@@@@@@@@@##.@...","....#@@@@@@@@@@@@@@@@@@##...@...",".....#@@@@@@@@@@@@@@@@#.....@...","......##@@@@@@@@@@@@##.....@....","........##@@@@@@@@##......@.....","..........###@@###.......@......","............####........@.......","................................","................................","................................","................................","................................","................................"],back:["................................","................................","................##..............","...............#@@#.............","..............#@@@@#............",".............#@@@@@@#...........","............#@@@@@@@@#..........","...........#@@@@@@@@@@#.........","..........#@@@@@@@@@@@@#........",".........#@@@@@@@@@@@@@@#.......","........#@@@@@@@@@@@@@@@@#......",".......#@@@@@@@@@@@@@@@@@@#.....","......#@@@@@@@@@@@@@@@@@o@@#....",".....#@@@@@@@@@@@@@@@@@@.@@@#...","....#@@@@@@@@@@@@@@@@@@@o@@@@#..","...#@@@@@@@@@@@@@@@@@@@@@@@@@@#.","..#@@@@@@@@@@@@@@@@@@@@@#####@#.","..#@@@@@@@@@@@@@@@@@@@@@#ooo#@#.","...@#@@@@@@@@@@@@@@@@@@@@#o#@#..","...@.##@@@@@@@@@@@@@@@@@@@###...","...@...##@@@@@@@@@@@@@@@@@@#....","...@.....#@@@@@@@@@@@@@@@@#.....","....@.....##@@@@@@@@@@@@##......",".....@......##@@@@@@@@##........","......@.......###@@###..........",".......@........####............","................................","................................","................................","................................","................................","................................"]},31:{front:["........#######.................",".......#@@@@@@@#................","......#@@@@@@@@@#...............",".....#@@@@@@@@@@@#..............","....#@@@@@@@@@@@@@#.............","...#@@@@@@@@@@@@@@@#............","..#@@@@@@@@@@@@@@@@@#...........",".#@@@@@@@@@@@@@@@@@@@#..........","#@@@@@@@@@@@@@@@@@@@@@#.........","#@@@@@@@@@@@@@@@@@@@@@@#........","#@@@@@@@@@@@@@@@@@@@@@@@#.......","#@@@@@@@@@@@@@@@@@@@@@@@@#......","#@@@@ooo@@@@@@@@@@@@@@@@@@@#....","#@@@o...o@@@@@@@@@@@@@@@@@@@@#..","#@@@@ooo@@@@@@@@@@@@@@@@@@@@@@#.",".##@@@@@@@@@@@@@@@@@@@@@@@@@@@@#","..#@@@@@@@@@@@@@@@@@@@@@@@@@@@#.","...#@@@@@@@@@@@@@@@@@@@@@@@@@#..","....#@@@@@@@@@@@@@@@@@@@@@@@#@..",".....#@@@@@@@@@@@@@@@@@@@@@#.@..","......#@@@@@@@@@@@@@@@@@@@#..@..",".......##@@@@@@@@@@@@@@@##...@..",".........##@@@@@@@@@@@##....@...","...........###@@@@@###.....@....",".............###@###......@.....","...............###.......@......","................#@......@.......",".................@.....@........",".................@....@.........","..................@..@..........","..................@.@...........","...................@............"],back:[".................#######........","................#@@@@@@@#.......","...............#@@@@@@@@@#......","..............#@@@@@@@@@@@#.....",".............#@@@@@@@@@@@@@#....","............#@@@@@@@@@@@@@@@#...","...........#@@@@@@@@@@@@@@@@@#..","..........#@@@@@@@@@@@@@@@@@@@#.",".........#@@@@@@@@@@@@@@@@@@@@@#","........#@@@@@@@@@@@@@@@@@@@@@@#",".......#@@@@@@@@@@@@@@@@@@@@@@@#","......#@@@@@@@@@@@@@@@@@@@@@@@@#","....#@@@@@@@@@@@@@@@@@@@@@ooo@@#","..#@@@@@@@@@@@@@@@@@@@@@@o...o@#",".#@@@@@@@@@@@@@@@@@@@@@@@@ooo@@#","#@@@@@@@@@@@@@@@@@@@@@@@@@@@@##.",".#@@@@@@@@@@@@@@@@@@@@@@@@@@@#..","..#@@@@@@@@@@@@@@@@@@@@@@@@@#...","..@#@@@@@@@@@@@@@@@@@@@@@@@#....","..@.#@@@@@@@@@@@@@@@@@@@@@#.....","..@..#@@@@@@@@@@@@@@@@@@@#......","..@...##@@@@@@@@@@@@@@@##.......","...@....##@@@@@@@@@@@##.........","....@.....###@@@@@###...........",".....@......###@###.............","......@.......###...............",".......@......@#................","........@.....@.................",".........@....@.................","..........@..@.................","...........@.@..................","............@..................."]}},Do={front:["................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................",".......................#........................","......................###.......................",".....................#@@@#......................","....................#@@@@@#.....................","...................#@@@@@@@#....................","..................#@@@@@@@@@#...................",".................#@@@@@@@@@@@#..................","................#@@@@@@@@@@@@@#.................","...............#@@@@@oo@@@@@@@@#................","..............#@@@@@@##@@@@@@@@@#...............",".............#@@@@@@@@@@@@@@@@@@@@#.............","............#@@@@@@@@@@@@@@@@@@@@@@#............","...........#@@@@@@@@@@@@@@@@@@@@@@@@#...........","..........#@@@@@@@@@@@@@@@@@@@@@@@@@#...........","........##@@@@@@@@@@@@@@@@@@@@@@@@@@#...........","........@@@@@@@@@@@@@@@@@@@@@@@@@@@#............",".........@@@@@@@@@@@@@@@@@@@@@@@@@@#............",".........@@@@@@@@@@@@@@@@@@@@@@@@@#.............","..........@@@@@@@@@@@@@@@@@@@@#@@#..............","...........@@@@@@@@@@@@@@@@@@#.##...............","............#@@@@@@@@@@@@@@@#...................",".............##@@@@@@@@@@@##....................","...............###@@@@@@##......................",".................####@##........................","...................####.........................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................"],back:["................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","........................#.......................",".......................###......................","......................#@@@#.....................",".....................#@@@@@#....................","....................#@@@@@@@#...................","...................#@@@@@@@@@#..................","..................#@@@@@@@@@@@#.................",".................#@@@@@@@@@@@@@#................","................#@@@@@@@@oo@@@@@#...............","...............#@@@@@@@@@##@@@@@@#..............",".............#@@@@@@@@@@@@@@@@@@@@#.............","............#@@@@@@@@@@@@@@@@@@@@@@#............","...........#@@@@@@@@@@@@@@@@@@@@@@@@#...........","...........#@@@@@@@@@@@@@@@@@@@@@@@@@#..........","...........#@@@@@@@@@@@@@@@@@@@@@@@@@@##........","............#@@@@@@@@@@@@@@@@@@@@@@@@@@@........","............#@@@@@@@@@@@@@@@@@@@@@@@@@@.........",".............#@@@@@@@@@@@@@@@@@@@@@@@@@.........","..............#@@#@@@@@@@@@@@@@@@@@@@@..........","...............##.#@@@@@@@@@@@@@@@@@@...........","...................#@@@@@@@@@@@@@@@#............","....................##@@@@@@@@@@@##.............","......................##@@@@@@###...............","........................##@####.................",".........................####...................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................","................................................"]};function Po(e){var a;const t=e.length,o=((a=e[0])==null?void 0:a.length)||32,s=[];for(let p=0;p<t;p++){const m=[],O=e[p]||"";for(let w=0;w<o;w++)switch(O[w]||"."){case"#":m.push(1);break;case"@":m.push(2);break;case"o":m.push(3);break;case"O":m.push(3);break;default:m.push(0);break}s.push(m)}return{width:o,height:t,pixels:s}}const xt=new Map;function Bo(e,t){const o=`${e}-${t?"front":"back"}`;if(!xt.has(o)){const s=Ho[e]||Do,a=t?s.front:s.back;xt.set(o,Po(a))}return xt.get(o)}function Wo(e,t,o,s=!1){const a=be(),p=[null,k.BLACK,k.DARK,k.LIGHT];for(let m=0;m<e.height;m++)for(let O=0;O<e.width;O++){const w=s?e.width-1-O:O,N=e.pixels[m][w];N>0&&(a.fillStyle=p[N],a.fillRect(Math.floor(t+O),Math.floor(o+m),1,1))}}function Pt(e,t,o,s){const a=Bo(e,s);Wo(a,t,o,!1)}const qt=["FIGHT","BAG","SHARK","RUN"];function _o(e){switch(no(),Yo(),Xo(e.enemyCreature),No(e.playerCreature),$o(e.enemyCreature,e.animatingHp.enemy),Ko(e.playerCreature,e.animatingHp.player),Fo(),e.phase){case"intro":case"message":case"executing":case"animating":case"victory":case"defeat":Go();break;case"select-action":Uo(e.menuIndex);break;case"select-move":zo(e.playerCreature,e.moveMenuIndex);break}}function Yo(){ut(100,48,56,2,1),ut(4,80,56,2,1)}function Xo(e){Pt(e.species.id,pe.ENEMY_SPRITE_X,pe.ENEMY_SPRITE_Y,!0)}function No(e){Pt(e.species.id,pe.PLAYER_SPRITE_X,pe.PLAYER_SPRITE_Y,!1)}function $o(e,t){const o=pe.ENEMY_INFO_X,s=pe.ENEMY_INFO_Y,a=72;yt(o-2,s-2,76,28);const p=(e.nickname||e.species.name).substring(0,6);A(p,o,s);const m=`L${e.level}`;Ne(m,o,a,s);const O=s+12;A("HP",o,O),lo(o+20,O,t,e.maxHp)}function Ko(e,t){const o=pe.PLAYER_INFO_X,s=pe.PLAYER_INFO_Y,a=68;yt(o-2,s-2,72,38);const p=(e.nickname||e.species.name).substring(0,6);A(p,o,s);const m=`L${e.level}`;Ne(m,o,a,s);const O=s+12;A("HP",o,O),lo(o+20,O,t,e.maxHp);const w=`${Math.floor(t)}/${e.maxHp}`;Ne(w,o+20,pe.HP_BAR_WIDTH,O+10)}function lo(e,t,o,s){const a=pe.HP_BAR_WIDTH,p=pe.HP_BAR_HEIGHT;ut(e,t,a,p,0);const m=Math.floor(o/s*(a-2)),O=o/s;let w=2;O<.2?w=0:O<.5&&(w=1),m>0&&ut(e+1,t+1,m,p-2,w)}function Fo(){yt(0,pe.TEXT_BOX_Y,S,pe.TEXT_BOX_HEIGHT)}function Go(){if(io(),bt()){const e=S-16,t=ee-12;A(">",e,t)}}function Uo(e){io();const t=pe.MENU_X,o=pe.TEXT_BOX_Y,s=S-t,a=pe.TEXT_BOX_HEIGHT;yt(t,o,s,a);const p=[{x:t+10,y:o+10},{x:t+46,y:o+10},{x:t+10,y:o+26},{x:t+46,y:o+26}];for(let m=0;m<qt.length;m++){const O=p[m];m===e&&A(">",O.x-8,O.y),A(qt[m],O.x,O.y)}}function zo(e,t){const s=pe.TEXT_BOX_Y+8;for(let p=0;p<e.moves.length&&p<4;p++){const m=e.moves[p],O=s+p*10;p===t&&A(">",8,O);const w=m.move.name.substring(0,7);A(w,16,O)}const a=e.moves[t];if(a){const m=pe.TEXT_BOX_Y+4;yt(96,m,60,40),A("PP",100,m+6),A(`${a.currentPp}/${a.move.pp}`,120,m+6);const O=a.move.type.toUpperCase().substring(0,8);A(O,100,m+20)}}function Bt(e,t=!1){const o=t?72:S-16;Lo(e,8,pe.TEXT_BOX_Y+8,o)}const D={FLOOR:0,WALL:1,WATER:2,KELP:3,DEEP:4,SAND:5,DOCK:6,HEAL:7},Zt={[D.FLOOR]:{type:"floor",solid:!1,swimOnly:!1,encounter:!1,encounterRate:0},[D.WALL]:{type:"wall",solid:!0,swimOnly:!1,encounter:!1,encounterRate:0},[D.WATER]:{type:"water",solid:!1,swimOnly:!0,encounter:!1,encounterRate:0},[D.KELP]:{type:"kelp",solid:!1,swimOnly:!0,encounter:!0,encounterRate:15},[D.DEEP]:{type:"deep",solid:!0,swimOnly:!0,encounter:!1,encounterRate:0},[D.SAND]:{type:"sand",solid:!1,swimOnly:!1,encounter:!1,encounterRate:0},[D.DOCK]:{type:"dock",solid:!1,swimOnly:!1,encounter:!1,encounterRate:0},[D.HEAL]:{type:"heal",solid:!1,swimOnly:!1,encounter:!1,encounterRate:0,heal:!0}};function Wt(e){return Zt[e]||Zt[D.FLOOR]}function Ct(e,t){const o=Wt(e);return!(o.solid||o.swimOnly&&!t||!o.swimOnly&&t)}function co(e){return Wt(e).swimOnly}const ne=8,Rt=new Map;function qo(e){const t=Array(ne).fill(null).map(()=>Array(ne).fill(3));switch(e){case D.FLOOR:for(let o=0;o<ne;o++)for(let s=0;s<ne;s++)t[o][s]=3,(s+o)%7===0&&(t[o][s]=2);break;case D.WALL:for(let o=0;o<ne;o++)for(let s=0;s<ne;s++)t[o][s]=1,(o===0||o===4)&&(t[o][s]=0),(o===2||o===6)&&s===4&&(t[o][s]=0),(o===2||o===6)&&s===0&&(t[o][s]=0);break;case D.WATER:for(let o=0;o<ne;o++)for(let s=0;s<ne;s++){const a=(s+o)%4;a===0?t[o][s]=1:t[o][s]=2}t[1][2]=3,t[1][3]=3,t[5][6]=3,t[5][7]=3;break;case D.KELP:for(let o=0;o<ne;o++)for(let s=0;s<ne;s++)(s+o)%4===0?t[o][s]=1:t[o][s]=2;t[1][2]=0,t[2][2]=1,t[3][3]=0,t[4][2]=1,t[5][2]=0,t[6][3]=1,t[2][5]=0,t[3][5]=1,t[4][6]=0,t[5][5]=1,t[6][5]=0,t[7][6]=1;break;case D.DEEP:for(let o=0;o<ne;o++)for(let s=0;s<ne;s++)t[o][s]=(s+o)%2===0?0:1;break;case D.SAND:for(let o=0;o<ne;o++)for(let s=0;s<ne;s++)t[o][s]=3;t[1][1]=2,t[1][5]=2,t[3][3]=2,t[3][7]=2,t[5][0]=2,t[5][4]=2,t[7][2]=2,t[7][6]=2;break;case D.DOCK:for(let o=0;o<ne;o++)for(let s=0;s<ne;s++)t[o][s]=2;for(let o=0;o<ne;o++)t[0][o]=1,t[3][o]=1,t[7][o]=1;t[1][2]=1,t[2][5]=1,t[5][1]=1,t[6][4]=1;break;case D.HEAL:for(let o=0;o<ne;o++)for(let s=0;s<ne;s++){const a=Math.abs(s-3.5)+Math.abs(o-3.5);a<2?t[o][s]=3:a<4?t[o][s]=2:t[o][s]=1}t[2][3]=3,t[2][4]=3,t[3][2]=3,t[3][3]=3,t[3][4]=3,t[3][5]=3,t[4][2]=3,t[4][3]=3,t[4][4]=3,t[4][5]=3,t[5][3]=3,t[5][4]=3;break}return{pixels:t}}function Zo(e){return Rt.has(e)||Rt.set(e,qo(e)),Rt.get(e)}function Qo(e,t,o){const s=be(),a=Zo(e),p=[k.BLACK,k.DARK,k.LIGHT,k.WHITE];for(let m=0;m<ne;m++)for(let O=0;O<ne;O++){const w=a.pixels[m][O];s.fillStyle=p[w],s.fillRect(Math.floor(t+O),Math.floor(o+m),1,1)}}const Qt={down_0:[".....####.......","....#@@@@#......","...#@@@@@@#.....","...#@@@@@@#.....","...#oO##Oo#.....","...#oooooo#.....","....#oooo#......","....##@@##......","...#@@@@@@#.....","..#@@@@@@@@#....","..#@#@@@@#@#....","...#@@@@@@#.....","...#@@##@@#.....","...#oo##oo#.....","....##..##......","................"],down_1:[".....####.......","....#@@@@#......","...#@@@@@@#.....","...#@@@@@@#.....","...#oO##Oo#.....","...#oooooo#.....","....#oooo#......","....##@@##......","...#@@@@@@#.....","..#@@@@@@@@#....","..#@#@@@@#@#....","...#@@@@@@#.....","...#@@##@@#.....","..#oo#..#oo#....","..##......##....","................"],down_2:[".....####.......","....#@@@@#......","...#@@@@@@#.....","...#@@@@@@#.....","...#oO##Oo#.....","...#oooooo#.....","....#oooo#......","....##@@##......","...#@@@@@@#.....","..#@@@@@@@@#....","..#@#@@@@#@#....","...#@@@@@@#.....","...#@@##@@#.....","....#oo##oo#....","....##....##....","................"],up_0:[".....####.......","....#@@@@#......","...#@@@@@@#.....","...#@@@@@@#.....","...#@@@@@@#.....","...#@@@@@@#.....","....#@@@@#......","....######......","...#@@@@@@#.....","..#@@@@@@@@#....","..#@#@@@@#@#....","...#@@@@@@#.....","...#@@##@@#.....","...#oo##oo#.....","....##..##......","................"],up_1:[".....####.......","....#@@@@#......","...#@@@@@@#.....","...#@@@@@@#.....","...#@@@@@@#.....","...#@@@@@@#.....","....#@@@@#......","....######......","...#@@@@@@#.....","..#@@@@@@@@#....","..#@#@@@@#@#....","...#@@@@@@#.....","...#@@##@@#.....","..#oo#..#oo#....","..##......##....","................"],up_2:[".....####.......","....#@@@@#......","...#@@@@@@#.....","...#@@@@@@#.....","...#@@@@@@#.....","...#@@@@@@#.....","....#@@@@#......","....######......","...#@@@@@@#.....","..#@@@@@@@@#....","..#@#@@@@#@#....","...#@@@@@@#.....","...#@@##@@#.....","....#oo##oo#....","....##....##....","................"],left_0:["....####........","...#@@@@#.......","..#@@@@@#.......","..#@@@@@#.......","..#Oo@@@#.......","..#oooo#........","...#ooo#........","...##@@##.......","..#@@@@@@#......",".#@@@@@@@@#.....",".#@#@@@@@@#.....","..#@@@@@@#......","..#@@##@@#......","..#oo##oo#......","...##..##.......","................"],left_1:["....####........","...#@@@@#.......","..#@@@@@#.......","..#@@@@@#.......","..#Oo@@@#.......","..#oooo#........","...#ooo#........","...##@@##.......","..#@@@@@@#......",".#@@@@@@@@#.....",".#@#@@@@@@#.....","..#@@@@@@#......","..#@@##@@#......",".#oo#..#oo#.....",".##......##.....","................"],left_2:["....####........","...#@@@@#.......","..#@@@@@#.......","..#@@@@@#.......","..#Oo@@@#.......","..#oooo#........","...#ooo#........","...##@@##.......","..#@@@@@@#......",".#@@@@@@@@#.....",".#@#@@@@@@#.....","..#@@@@@@#......","..#@@##@@#......","...#oo##oo#.....","...##....##.....","................"],right_0:["........####....",".......#@@@@#...",".......#@@@@@#..",".......#@@@@@#..",".......#@@@oO#..","........#oooo#..","........#ooo#...",".......##@@##...","......#@@@@@@#..",".....#@@@@@@@@#.",".....#@@@@@@#@#.","......#@@@@@@#..","......#@@##@@#..","......#oo##oo#..",".......##..##...","................"],right_1:["........####....",".......#@@@@#...",".......#@@@@@#..",".......#@@@@@#..",".......#@@@oO#..","........#oooo#..","........#ooo#...",".......##@@##...","......#@@@@@@#..",".....#@@@@@@@@#.",".....#@@@@@@#@#.","......#@@@@@@#..","......#@@##@@#..",".....#oo#..#oo#.",".....##......##.","................"],right_2:["........####....",".......#@@@@#...",".......#@@@@@#..",".......#@@@@@#..",".......#@@@oO#..","........#oooo#..","........#ooo#...",".......##@@##...","......#@@@@@@#..",".....#@@@@@@@@#.",".....#@@@@@@#@#.","......#@@@@@@#..","......#@@##@@#..","......#oo##oo#..",".......##..##...","................"],swim_down_0:["................","................",".....####.......","....#@@@@#......","...#@@@@@@#.....","...#oO##Oo#.....","...#oooooo#.....","....#oooo#......","..##@@@@@@##....",".#@@@@@@@@@@#...",".#@#@@@@@@#@#...","..#@@@@@@@@#....","...########.....","................","................","................"],swim_down_1:["................","................",".....####.......","....#@@@@#......","...#@@@@@@#.....","...#oO##Oo#.....","...#oooooo#.....","....#oooo#......","..##@@@@@@##....",".#@@@@@@@@@@#...","..#@@@@@@@@#....","...########.....","................","................","................","................"],swim_down_2:["................","................",".....####.......","....#@@@@#......","...#@@@@@@#.....","...#oO##Oo#.....","...#oooooo#.....","....#oooo#......","..##@@@@@@##....",".#@@@@@@@@@@#...",".#@#@@@@@@#@#...","..#@@@@@@@@#....","...########.....","................","................","................"],swim_up_0:["................","................",".....####.......","....#@@@@#......","...#@@@@@@#.....","...#@@@@@@#.....","...#@@@@@@#.....","....#@@@@#......","..##@@@@@@##....",".#@@@@@@@@@@#...",".#@#@@@@@@#@#...","..#@@@@@@@@#....","...########.....","................","................","................"],swim_up_1:["................","................",".....####.......","....#@@@@#......","...#@@@@@@#.....","...#@@@@@@#.....","...#@@@@@@#.....","....#@@@@#......","..##@@@@@@##....",".#@@@@@@@@@@#...","..#@@@@@@@@#....","...########.....","................","................","................","................"],swim_up_2:["................","................",".....####.......","....#@@@@#......","...#@@@@@@#.....","...#@@@@@@#.....","...#@@@@@@#.....","....#@@@@#......","..##@@@@@@##....",".#@@@@@@@@@@#...",".#@#@@@@@@#@#...","..#@@@@@@@@#....","...########.....","................","................","................"],swim_left_0:["................","................","....####........","...#@@@@#.......","..#@@@@@#.......","..#Oo@@@#.......","..#oooo#........","...#ooo#........",".##@@@@@@##.....","#@@@@@@@@@@#....","#@#@@@@@@@@#....",".#@@@@@@@@#.....","..########......","................","................","................"],swim_left_1:["................","................","....####........","...#@@@@#.......","..#@@@@@#.......","..#Oo@@@#.......","..#oooo#........","...#ooo#........",".##@@@@@@##.....","#@@@@@@@@@@#....",".#@@@@@@@@#.....","..########......","................","................","................","................"],swim_left_2:["................","................","....####........","...#@@@@#.......","..#@@@@@#.......","..#Oo@@@#.......","..#oooo#........","...#ooo#........",".##@@@@@@##.....","#@@@@@@@@@@#....","#@#@@@@@@@@#....",".#@@@@@@@@#.....","..########......","................","................","................"],swim_right_0:["................","................","........####....",".......#@@@@#...",".......#@@@@@#..",".......#@@@oO#..","........#oooo#..","........#ooo#...",".....##@@@@@@##.","....#@@@@@@@@@@#","....#@@@@@@@@#@#",".....#@@@@@@@@#.","......########..","................","................","................"],swim_right_1:["................","................","........####....",".......#@@@@#...",".......#@@@@@#..",".......#@@@oO#..","........#oooo#..","........#ooo#...",".....##@@@@@@##.","....#@@@@@@@@@@#",".....#@@@@@@@@#.","......########..","................","................","................","................"],swim_right_2:["................","................","........####....",".......#@@@@#...",".......#@@@@@#..",".......#@@@oO#..","........#oooo#..","........#ooo#...",".....##@@@@@@##.","....#@@@@@@@@@@#","....#@@@@@@@@#@#",".....#@@@@@@@@#.","......########..","................","................","................"]};function Vo(e){const t=[];for(let o=0;o<16;o++){const s=[],a=e[o]||"";for(let p=0;p<16;p++)switch(a[p]||"."){case"#":s.push(1);break;case"@":s.push(2);break;case"o":s.push(3);break;case"O":s.push(4);break;default:s.push(0);break}t.push(s)}return t}const Et=new Map;function jo(e,t,o){const s=o?`swim_${e}_${t}`:`${e}_${t}`;if(!Et.has(s)){const a=Qt[s]||Qt.down_0;Et.set(s,Vo(a))}return Et.get(s)}function po(e,t,o,s,a){const p=be(),m=jo(o,s,a),O=[null,k.BLACK,k.DARK,k.LIGHT,k.WHITE];for(let w=0;w<16;w++)for(let N=0;N<16;N++){const V=m[w][N];V>0&&(p.fillStyle=O[V],p.fillRect(Math.floor(e+N),Math.floor(t+w),1,1))}}const Jo={shark:{fighting:.5},leviathan:{leviathan:2,ice:.5},breaching:{fighting:2,algae:2,electric:.5,ice:.5},fighting:{shark:2,steel:2,ice:2,breaching:.5,psychic:.5},psychic:{fighting:2,poison:2,ghost:.5,deepsea:0},freshwater:{fire:2,fossil:2,electric:.5,algae:.5},fire:{algae:2,steel:2,ice:2,freshwater:.5,fossil:.5},fairy:{fighting:2,leviathan:2,deepsea:2,poison:.5,steel:.5},algae:{freshwater:2,fossil:2,ground:2,fire:.5,ice:.5,poison:.5},steel:{fairy:2,ice:2,fossil:2,fire:.5,fighting:.5,ground:.5},ghost:{ghost:2,psychic:2,shark:0,deepsea:.5},deepsea:{ghost:2,psychic:2,fighting:.5,fairy:.5},poison:{fairy:2,algae:2,ground:.5,psychic:.5,steel:0,poison:.5},ray:{algae:2,psychic:2,deepsea:2,breaching:.5,fire:.5,fossil:.5},ice:{breaching:2,algae:2,leviathan:2,fire:.5,fighting:.5,fossil:.5,freshwater:.5,steel:.5},electric:{freshwater:2,breaching:2,ground:0,electric:.5},fossil:{fire:2,ice:2,breaching:2,freshwater:.5,fighting:.5,algae:.5,steel:.5},ground:{electric:2,poison:2,fire:2,steel:2,freshwater:.5,ice:.5,algae:.5,breaching:0}};function es(e,t){let o=1;for(const s of t){const p=Jo[e][s];p!==void 0&&(o*=p)}return o===0?0:o<=.25||o===.5?.5:o===1?1:o>=2?2:1}function ts(e){switch(e){case 0:return"It doesn't affect";case .5:return"It's not very effective...";case 2:return"It's super effective!";default:return null}}function os(e,t,o){if(o.category==="status"||o.power===0)return{damage:0,effectiveness:1,isCritical:!1,isStab:!1};if(Math.random()*100>o.accuracy)return{damage:0,effectiveness:1,isCritical:!1,isStab:!1};let a,p;o.category==="physical"?(a=e.stats.attack,p=t.stats.defense):(a=e.stats.spAttack,p=t.stats.spDefense);const m=e.level,O=o.power,w=Math.floor((2*m/5+2)*O*a/p/50+2),N=Math.random()<1/16,V=N?2:1,Z=e.species.types.includes(o.type),ge=Z?1.5:1,Ae=es(o.type,t.species.types),Se=Math.random()*.15+.85;let te=Math.floor(w*V*ge*Ae*Se);return Ae>0&&te<1&&(te=1),{damage:te,effectiveness:Ae,isCritical:N,isStab:Z}}function _t(e,t){const o=e.baseStats,s=Math.floor(2*o.hp*t/100+t+10),a=p=>Math.floor(2*p*t/100+5);return{hp:s,attack:a(o.attack),defense:a(o.defense),spAttack:a(o.spAttack),spDefense:a(o.spDefense),speed:a(o.speed)}}const ss={1:{id:1,name:"TACKLE",type:"shark",category:"physical",power:40,accuracy:100,pp:35,description:"A full-body charge attack."},2:{id:2,name:"BITE",type:"deepsea",category:"physical",power:60,accuracy:100,pp:25,description:"Bites with sharp fangs."},3:{id:3,name:"TAIL WHIP",type:"shark",category:"status",power:0,accuracy:100,pp:30,description:"Lowers the foe's Defense.",effect:{type:"stat-change",target:"enemy",statChanges:{defense:-1}}},10:{id:10,name:"WATER GUN",type:"freshwater",category:"special",power:40,accuracy:100,pp:25,description:"Squirts water to attack."},11:{id:11,name:"AQUA JET",type:"freshwater",category:"physical",power:40,accuracy:100,pp:20,description:"Strikes first with a jet of water."},12:{id:12,name:"WATER PULSE",type:"freshwater",category:"special",power:60,accuracy:100,pp:20,description:"Attacks with ultrasonic waves."},13:{id:13,name:"SURF",type:"freshwater",category:"special",power:90,accuracy:100,pp:15,description:"A huge wave crashes down."},14:{id:14,name:"HYDRO PUMP",type:"freshwater",category:"special",power:110,accuracy:80,pp:5,description:"Blasts water at high pressure."},20:{id:20,name:"RAM",type:"fighting",category:"physical",power:50,accuracy:100,pp:25,description:"Rams the foe with force."},21:{id:21,name:"THRASH",type:"fighting",category:"physical",power:75,accuracy:100,pp:15,description:"A reckless thrashing attack."},22:{id:22,name:"BRICK BREAK",type:"fighting",category:"physical",power:75,accuracy:100,pp:15,description:"A powerful strike that breaks barriers."},23:{id:23,name:"CLOSE COMBAT",type:"fighting",category:"physical",power:120,accuracy:100,pp:5,description:"All-out attack that lowers own defenses."},30:{id:30,name:"PURSUIT",type:"deepsea",category:"physical",power:40,accuracy:100,pp:20,description:"Chases down fleeing foes."},31:{id:31,name:"CRUNCH",type:"deepsea",category:"physical",power:80,accuracy:100,pp:15,description:"Crunches with powerful jaws."},40:{id:40,name:"CONFUSION",type:"psychic",category:"special",power:50,accuracy:100,pp:25,description:"A weak psychic attack."},41:{id:41,name:"PSYBEAM",type:"psychic",category:"special",power:65,accuracy:100,pp:20,description:"Fires a peculiar ray."},42:{id:42,name:"PSYCHIC",type:"psychic",category:"special",power:90,accuracy:100,pp:10,description:"A strong psychic attack."},50:{id:50,name:"SPARK",type:"electric",category:"physical",power:65,accuracy:100,pp:20,description:"An electrically charged tackle."},51:{id:51,name:"THUNDER SHOCK",type:"electric",category:"special",power:40,accuracy:100,pp:30,description:"An electric shock attack."},60:{id:60,name:"EMBER",type:"fire",category:"special",power:40,accuracy:100,pp:25,description:"A small flame attack."},61:{id:61,name:"FIRE FANG",type:"fire",category:"physical",power:65,accuracy:95,pp:15,description:"Bites with heated fangs."},62:{id:62,name:"FLAME BURST",type:"fire",category:"special",power:70,accuracy:100,pp:15,description:"A burst of spreading flames."},63:{id:63,name:"FLAMETHROWER",type:"fire",category:"special",power:90,accuracy:100,pp:15,description:"A powerful stream of fire."},70:{id:70,name:"METAL CLAW",type:"steel",category:"physical",power:50,accuracy:95,pp:35,description:"Rakes with steel-hard fins."},71:{id:71,name:"IRON HEAD",type:"steel",category:"physical",power:80,accuracy:100,pp:15,description:"Rams with a hardened head."},72:{id:72,name:"STEEL WING",type:"steel",category:"physical",power:70,accuracy:90,pp:25,description:"Strikes with metallic fins."},73:{id:73,name:"IRON TAIL",type:"steel",category:"physical",power:100,accuracy:75,pp:15,description:"Slams with a steel-hard tail."},80:{id:80,name:"SAND ATTACK",type:"ground",category:"status",power:0,accuracy:100,pp:15,description:"Kicks sand to lower accuracy.",effect:{type:"stat-change",target:"enemy",statChanges:{speed:-1}}},81:{id:81,name:"MUD SHOT",type:"ground",category:"special",power:55,accuracy:95,pp:15,description:"Hurls mud at the target."},90:{id:90,name:"WING ATTACK",type:"breaching",category:"physical",power:60,accuracy:100,pp:35,description:"Strikes with fins like wings."},91:{id:91,name:"AERIAL ACE",type:"breaching",category:"physical",power:60,accuracy:100,pp:20,description:"An unavoidable aerial strike."},100:{id:100,name:"VINE WHIP",type:"algae",category:"physical",power:45,accuracy:100,pp:25,description:"Whips with kelp-like tendrils."},101:{id:101,name:"ABSORB",type:"algae",category:"special",power:40,accuracy:100,pp:25,description:"Drains nutrients from the foe."},110:{id:110,name:"POWDER SNOW",type:"ice",category:"special",power:40,accuracy:100,pp:25,description:"A chilling flurry of snow."},111:{id:111,name:"ICE FANG",type:"ice",category:"physical",power:65,accuracy:95,pp:15,description:"Bites with freezing fangs."},120:{id:120,name:"FAIRY WIND",type:"fairy",category:"special",power:40,accuracy:100,pp:30,description:"A mystical breeze attack."},121:{id:121,name:"DAZZLE",type:"fairy",category:"special",power:65,accuracy:100,pp:20,description:"A dazzling flash of light."},130:{id:130,name:"LICK",type:"ghost",category:"physical",power:30,accuracy:100,pp:30,description:"An eerie lick that may paralyze."},131:{id:131,name:"SHADOW SNEAK",type:"ghost",category:"physical",power:40,accuracy:100,pp:30,description:"Attacks from the shadows first."},132:{id:132,name:"SHADOW BALL",type:"ghost",category:"special",power:80,accuracy:100,pp:15,description:"Hurls a shadowy blob."},140:{id:140,name:"JAW LOCK",type:"deepsea",category:"physical",power:80,accuracy:100,pp:10,description:"Locks jaws onto the foe."},150:{id:150,name:"POISON STING",type:"poison",category:"physical",power:15,accuracy:100,pp:35,description:"A toxic barb strike."},151:{id:151,name:"TOXIC",type:"poison",category:"status",power:0,accuracy:90,pp:10,description:"Badly poisons the target.",effect:{type:"status",target:"enemy",status:"poisoned"}},160:{id:160,name:"ROCK THROW",type:"fossil",category:"physical",power:50,accuracy:90,pp:15,description:"Hurls ancient stones."},161:{id:161,name:"ANCIENT POWER",type:"fossil",category:"special",power:60,accuracy:100,pp:5,description:"Channels primordial energy."},170:{id:170,name:"LEVIATHAN RAGE",type:"leviathan",category:"special",power:80,accuracy:100,pp:10,description:"Unleashes titanic fury."},52:{id:52,name:"THUNDERBOLT",type:"electric",category:"special",power:90,accuracy:100,pp:15,description:"A strong electrical attack."}};function je(e){return ss[e]}const as={1:{id:1,name:"Blacknose Shark",types:["shark"],baseStats:{hp:44,attack:52,defense:40,spAttack:50,spDefense:44,speed:56},learnableMoves:[{level:1,moveId:1},{level:1,moveId:3},{level:7,moveId:60},{level:13,moveId:2},{level:19,moveId:61}],evolvesTo:{speciesId:2,level:16},description:"A curious reef shark with a distinctive dark snout. Its metabolism runs hot, warming the water around it."},2:{id:2,name:"Blacktip Reef Shark",types:["shark","fire"],baseStats:{hp:59,attack:70,defense:55,spAttack:65,spDefense:55,speed:71},learnableMoves:[{level:1,moveId:1},{level:1,moveId:3},{level:1,moveId:60},{level:1,moveId:2},{level:22,moveId:61},{level:28,moveId:62},{level:34,moveId:11}],evolvesTo:{speciesId:3,level:36},description:"Its black-tipped fins radiate heat. Known for its speed and agility when chasing prey through warm shallows."},3:{id:3,name:"Oceanic Blacktip",types:["shark","fire"],baseStats:{hp:78,attack:88,defense:73,spAttack:85,spDefense:73,speed:92},learnableMoves:[{level:1,moveId:1},{level:1,moveId:60},{level:1,moveId:2},{level:1,moveId:61},{level:40,moveId:63},{level:48,moveId:31}],description:"The oceanic blacktip at its peak. Water sizzles in its wake as it pursues prey at blazing speed."},4:{id:4,name:"Whitenose Shark",types:["shark"],baseStats:{hp:46,attack:55,defense:45,spAttack:40,spDefense:42,speed:52},learnableMoves:[{level:1,moveId:1},{level:1,moveId:3},{level:7,moveId:20},{level:13,moveId:2},{level:19,moveId:21}],evolvesTo:{speciesId:5,level:16},description:"A bold young shark with a pale snout. Fearlessly approaches anything new, even creatures much larger than itself."},5:{id:5,name:"Whitetip Reef Shark",types:["shark","fighting"],baseStats:{hp:61,attack:75,defense:60,spAttack:50,spDefense:55,speed:68},learnableMoves:[{level:1,moveId:1},{level:1,moveId:3},{level:1,moveId:20},{level:1,moveId:2},{level:22,moveId:21},{level:28,moveId:22},{level:34,moveId:11}],evolvesTo:{speciesId:6,level:36},description:"An aggressive reef hunter with white-tipped fins. Never backs down from a fight."},6:{id:6,name:"Oceanic Whitetip",types:["shark","fighting"],baseStats:{hp:80,attack:98,defense:78,spAttack:60,spDefense:70,speed:82},learnableMoves:[{level:1,moveId:1},{level:1,moveId:20},{level:1,moveId:21},{level:1,moveId:22},{level:40,moveId:23},{level:48,moveId:31}],description:"The most dangerous shark in open ocean. Its persistence and aggression are legendary."},7:{id:7,name:"Hardnose Shark",types:["shark"],baseStats:{hp:48,attack:48,defense:55,spAttack:45,spDefense:50,speed:45},learnableMoves:[{level:1,moveId:1},{level:1,moveId:3},{level:7,moveId:70},{level:13,moveId:2},{level:19,moveId:71}],evolvesTo:{speciesId:8,level:16},description:"A tough young shark with unusually hard skin. Its snout can crack open shellfish with ease."},8:{id:8,name:"Grey Reef Shark",types:["shark","steel"],baseStats:{hp:65,attack:65,defense:78,spAttack:55,spDefense:70,speed:55},learnableMoves:[{level:1,moveId:1},{level:1,moveId:3},{level:1,moveId:70},{level:1,moveId:2},{level:22,moveId:71},{level:28,moveId:72},{level:34,moveId:11}],evolvesTo:{speciesId:9,level:36},description:"Its scales have hardened into armor plates. Patrols its reef territory with methodical precision."},9:{id:9,name:"Silvertip Shark",types:["shark","steel"],baseStats:{hp:85,attack:80,defense:100,spAttack:65,spDefense:90,speed:68},learnableMoves:[{level:1,moveId:1},{level:1,moveId:70},{level:1,moveId:71},{level:1,moveId:72},{level:40,moveId:73},{level:48,moveId:31}],description:"Chrome-scaled apex predator with distinctive white fin tips. Its armor deflects most attacks."},10:{id:10,name:"Bonnethead",types:["psychic"],baseStats:{hp:50,attack:55,defense:50,spAttack:55,spDefense:50,speed:45},learnableMoves:[{level:1,moveId:1},{level:1,moveId:40},{level:10,moveId:3},{level:15,moveId:41}],evolvesTo:{speciesId:11,level:22},description:"A small hammerhead species with a shovel-shaped head. Uses electroreception to find buried prey."},11:{id:11,name:"Scalloped Hammerhead",types:["psychic"],baseStats:{hp:75,attack:80,defense:70,spAttack:80,spDefense:70,speed:65},learnableMoves:[{level:1,moveId:1},{level:1,moveId:40},{level:1,moveId:41},{level:25,moveId:42},{level:30,moveId:2},{level:35,moveId:31}],description:"Its wide cephalofoil grants powerful electromagnetic senses. Can detect heartbeats buried in sand."},12:{id:12,name:"Lemon Shark",types:["ground"],baseStats:{hp:45,attack:50,defense:55,spAttack:35,spDefense:45,speed:40},learnableMoves:[{level:1,moveId:1},{level:1,moveId:80},{level:8,moveId:81},{level:15,moveId:2}],description:"A yellowish shark that prefers sandy shallows. Often seen resting motionless on the seafloor."},13:{id:13,name:"Nurse Shark",types:["shark"],baseStats:{hp:40,attack:45,defense:35,spAttack:40,spDefense:35,speed:55},learnableMoves:[{level:1,moveId:1},{level:1,moveId:3},{level:6,moveId:2},{level:12,moveId:11}],description:"A docile bottom-dweller found in warm coastal waters. Commonly seen resting in groups."},14:{id:14,name:"Atlantic Stingray",types:["ray"],baseStats:{hp:50,attack:40,defense:60,spAttack:45,spDefense:50,speed:35},learnableMoves:[{level:1,moveId:1},{level:1,moveId:3},{level:7,moveId:90},{level:14,moveId:10}],evolvesTo:{speciesId:28,level:25},description:"A small ray that glides along sandy bottoms. Its tail barb is still developing."},15:{id:15,name:"Lanternshark",types:["electric"],baseStats:{hp:35,attack:40,defense:40,spAttack:60,spDefense:45,speed:50},learnableMoves:[{level:1,moveId:1},{level:1,moveId:51},{level:9,moveId:50},{level:16,moveId:2}],evolvesTo:{speciesId:32,level:20},description:"A tiny deep-sea shark with bioluminescent photophores. Glows to camouflage against dim light above."},16:{id:16,name:"Wobbegong",types:["algae"],baseStats:{hp:55,attack:45,defense:55,spAttack:50,spDefense:55,speed:30},learnableMoves:[{level:1,moveId:1},{level:1,moveId:100},{level:8,moveId:101},{level:15,moveId:2}],description:"A flat carpet shark covered in algae-like tassels. Nearly invisible among kelp and coral."},17:{id:17,name:"Greenland Shark",types:["ice"],baseStats:{hp:50,attack:55,defense:50,spAttack:45,spDefense:50,speed:35},learnableMoves:[{level:1,moveId:1},{level:1,moveId:110},{level:10,moveId:111},{level:17,moveId:2}],description:"An ancient Arctic shark that lives for centuries. Moves slowly but can ambush sleeping seals."},18:{id:18,name:"Coral Catshark",types:["fairy"],baseStats:{hp:45,attack:40,defense:55,spAttack:60,spDefense:65,speed:40},learnableMoves:[{level:1,moveId:1},{level:1,moveId:120},{level:8,moveId:3},{level:15,moveId:121}],description:"A small, colorful shark with intricate patterns. Hides in reef crevices during the day."},19:{id:19,name:"Spinner Shark",types:["breaching"],baseStats:{hp:50,attack:65,defense:45,spAttack:45,spDefense:45,speed:75},learnableMoves:[{level:1,moveId:1},{level:1,moveId:90},{level:10,moveId:20},{level:18,moveId:91}],evolvesTo:{speciesId:20,level:28},description:"Famous for spinning through the air while hunting. Leaps and twists to catch schooling fish."},20:{id:20,name:"Thresher Shark",types:["breaching","fighting"],baseStats:{hp:70,attack:95,defense:60,spAttack:55,spDefense:55,speed:90},learnableMoves:[{level:1,moveId:1},{level:1,moveId:90},{level:1,moveId:20},{level:1,moveId:91},{level:32,moveId:21},{level:40,moveId:22}],description:"Uses its scythe-like tail to stun prey. The tail can be as long as its entire body."},21:{id:21,name:"Bull Shark",types:["fighting","freshwater"],baseStats:{hp:80,attack:90,defense:70,spAttack:50,spDefense:60,speed:60},learnableMoves:[{level:1,moveId:1},{level:1,moveId:20},{level:10,moveId:10},{level:18,moveId:21},{level:26,moveId:22},{level:35,moveId:31}],description:"Extremely aggressive and territorial. One of few sharks that can survive in freshwater rivers."},22:{id:22,name:"Spotted Ratfish",types:["ghost"],baseStats:{hp:45,attack:40,defense:50,spAttack:65,spDefense:60,speed:45},learnableMoves:[{level:1,moveId:1},{level:1,moveId:130},{level:10,moveId:131},{level:18,moveId:40}],evolvesTo:{speciesId:23,level:35},description:"A chimaera with ghostly eyes that reflect light eerily. Drifts silently through deep waters."},23:{id:23,name:"Ghost Shark",types:["ghost","deepsea"],baseStats:{hp:70,attack:65,defense:70,spAttack:95,spDefense:90,speed:60},learnableMoves:[{level:1,moveId:1},{level:1,moveId:130},{level:1,moveId:131},{level:1,moveId:40},{level:38,moveId:132},{level:45,moveId:31}],description:"An ancient chimaera from the abyss. Its pale form seems to phase through the darkness."},24:{id:24,name:"Goblin Shark",types:["deepsea"],baseStats:{hp:65,attack:85,defense:55,spAttack:70,spDefense:65,speed:50},learnableMoves:[{level:1,moveId:1},{level:1,moveId:2},{level:12,moveId:30},{level:20,moveId:31},{level:28,moveId:140}],description:"A living fossil with an extendable jaw that shoots forward to snatch prey from the darkness."},25:{id:25,name:"Sawshark",types:["steel"],baseStats:{hp:70,attack:90,defense:85,spAttack:45,spDefense:60,speed:50},learnableMoves:[{level:1,moveId:1},{level:1,moveId:70},{level:14,moveId:71},{level:22,moveId:72},{level:30,moveId:73}],evolvesTo:{speciesId:41,level:35},description:"Its blade-like snout is lined with teeth. Slashes sideways through schools of fish."},26:{id:26,name:"Torpedo Ray",types:["electric","ray"],baseStats:{hp:55,attack:50,defense:60,spAttack:85,spDefense:70,speed:65},learnableMoves:[{level:1,moveId:1},{level:1,moveId:51},{level:10,moveId:50},{level:18,moveId:90},{level:26,moveId:52}],evolvesTo:{speciesId:34,level:30},description:"Can generate powerful electric shocks to stun prey. Buries itself in sand to ambush victims."},27:{id:27,name:"Manta Ray",types:["breaching","ray"],baseStats:{hp:85,attack:60,defense:70,spAttack:80,spDefense:80,speed:75},learnableMoves:[{level:1,moveId:1},{level:1,moveId:90},{level:12,moveId:10},{level:20,moveId:91},{level:28,moveId:42}],description:"A graceful giant that soars through the water. Despite its size, it feeds only on plankton."},28:{id:28,name:"Southern Stingray",types:["ray","poison"],baseStats:{hp:70,attack:65,defense:80,spAttack:60,spDefense:70,speed:50},learnableMoves:[{level:1,moveId:1},{level:1,moveId:90},{level:1,moveId:10},{level:28,moveId:150},{level:35,moveId:151}],description:"A large ray with a venomous tail barb. Glides elegantly over sandy seafloors."},29:{id:29,name:"Helicoprion",types:["fossil"],baseStats:{hp:75,attack:95,defense:80,spAttack:55,spDefense:65,speed:55},learnableMoves:[{level:1,moveId:1},{level:1,moveId:2},{level:15,moveId:160},{level:25,moveId:161},{level:35,moveId:31}],description:"An ancient shark-like fish with a bizarre spiral tooth whorl. Revived from 270-million-year-old fossils."},30:{id:30,name:"Cladoselache",types:["fossil"],baseStats:{hp:60,attack:70,defense:70,spAttack:50,spDefense:60,speed:45},learnableMoves:[{level:1,moveId:1},{level:1,moveId:160},{level:12,moveId:2},{level:20,moveId:161}],description:"One of the first true sharks from 370 million years ago. Adapting to the modern ocean."},31:{id:31,name:"Megalodon",types:["fossil","leviathan"],baseStats:{hp:110,attack:120,defense:95,spAttack:80,spDefense:85,speed:70},learnableMoves:[{level:1,moveId:1},{level:1,moveId:2},{level:1,moveId:160},{level:1,moveId:161},{level:50,moveId:170},{level:60,moveId:31}],description:"The legendary giant shark revived. At 60 feet long, it dwarfs all modern sharks."},32:{id:32,name:"Velvet Lanternshark",types:["electric"],baseStats:{hp:55,attack:55,defense:55,spAttack:85,spDefense:65,speed:65},learnableMoves:[{level:1,moveId:1},{level:1,moveId:51},{level:1,moveId:50},{level:1,moveId:2},{level:24,moveId:52},{level:32,moveId:31}],evolvesTo:{speciesId:33,level:36},description:"Its velvet-black skin is dotted with brilliant photophores. Hunts in the twilight zone."},33:{id:33,name:"Giant Lanternshark",types:["electric","leviathan"],baseStats:{hp:80,attack:70,defense:70,spAttack:110,spDefense:85,speed:80},learnableMoves:[{level:1,moveId:1},{level:1,moveId:51},{level:1,moveId:50},{level:1,moveId:52},{level:40,moveId:170},{level:48,moveId:31}],description:"A massive deep-sea predator that lights up the abyss. Its glow can be seen from miles away."},34:{id:34,name:"Marbled Electric Ray",types:["electric","ray"],baseStats:{hp:75,attack:65,defense:80,spAttack:105,spDefense:85,speed:70},learnableMoves:[{level:1,moveId:1},{level:1,moveId:51},{level:1,moveId:50},{level:1,moveId:90},{level:1,moveId:52},{level:35,moveId:42},{level:42,moveId:91}],description:"Its marbled pattern conceals deadly electric organs. The largest of the electric rays."},35:{id:35,name:"Tasselled Wobbegong",types:["algae","freshwater"],baseStats:{hp:75,attack:70,defense:75,spAttack:60,spDefense:70,speed:35},learnableMoves:[{level:1,moveId:1},{level:1,moveId:100},{level:10,moveId:101},{level:18,moveId:2},{level:26,moveId:10},{level:34,moveId:31}],description:"Elaborate tassels make it invisible among seaweed. Ambushes prey that swim too close."},36:{id:36,name:"Bluntnose Sixgill",types:["deepsea"],baseStats:{hp:85,attack:80,defense:70,spAttack:55,spDefense:65,speed:45},learnableMoves:[{level:1,moveId:1},{level:1,moveId:2},{level:12,moveId:30},{level:20,moveId:31},{level:28,moveId:140},{level:36,moveId:161}],description:"An ancient shark with six gill slits instead of five. Drifts up from the deep at night."},37:{id:37,name:"Sandbar Shark",types:["fighting","freshwater"],baseStats:{hp:70,attack:75,defense:65,spAttack:50,spDefense:60,speed:65},learnableMoves:[{level:1,moveId:1},{level:1,moveId:20},{level:10,moveId:10},{level:18,moveId:21},{level:26,moveId:22},{level:34,moveId:12}],description:"A powerful coastal shark with a tall dorsal fin. Patrols sandbars hunting for prey."},38:{id:38,name:"Pyjama Shark",types:["fairy","algae"],baseStats:{hp:65,attack:55,defense:70,spAttack:80,spDefense:85,speed:50},learnableMoves:[{level:1,moveId:1},{level:1,moveId:120},{level:1,moveId:3},{level:1,moveId:121},{level:28,moveId:100},{level:35,moveId:101}],description:"Named for its striped pajama-like pattern. Curls up in kelp beds during the day."},39:{id:39,name:"Kitefin Shark",types:["steel","ghost"],baseStats:{hp:70,attack:75,defense:80,spAttack:85,spDefense:80,speed:55},learnableMoves:[{level:1,moveId:1},{level:1,moveId:70},{level:1,moveId:130},{level:15,moveId:131},{level:25,moveId:71},{level:35,moveId:132}],description:"A bioluminescent deep-sea predator. Its entire body glows an eerie blue-green."},40:{id:40,name:"Gulper Shark",types:["deepsea","ghost"],baseStats:{hp:85,attack:80,defense:75,spAttack:100,spDefense:95,speed:55},learnableMoves:[{level:1,moveId:1},{level:1,moveId:130},{level:1,moveId:131},{level:1,moveId:40},{level:1,moveId:132},{level:42,moveId:140},{level:50,moveId:31}],description:"Its massive jaws can swallow prey larger than itself. Haunts the deepest trenches."},41:{id:41,name:"Largetooth Sawfish",types:["steel","fighting"],baseStats:{hp:90,attack:115,defense:100,spAttack:50,spDefense:70,speed:60},learnableMoves:[{level:1,moveId:1},{level:1,moveId:70},{level:1,moveId:71},{level:1,moveId:72},{level:1,moveId:73},{level:40,moveId:22},{level:48,moveId:23}],description:"A massive sawfish with a blade-like rostrum. Its saw can cut through steel chains."},42:{id:42,name:"Ptychodus",types:["fossil","ray"],baseStats:{hp:80,attack:65,defense:95,spAttack:70,spDefense:90,speed:40},learnableMoves:[{level:1,moveId:1},{level:1,moveId:160},{level:12,moveId:90},{level:20,moveId:161},{level:28,moveId:71},{level:36,moveId:31}],description:"A prehistoric shell-crusher with flat teeth. Revived from Cretaceous ocean fossils."},43:{id:43,name:"Edestus",types:["fossil","steel"],baseStats:{hp:75,attack:100,defense:85,spAttack:60,spDefense:70,speed:55},learnableMoves:[{level:1,moveId:1},{level:1,moveId:160},{level:1,moveId:70},{level:15,moveId:2},{level:25,moveId:161},{level:35,moveId:73},{level:45,moveId:31}],description:"The scissor-toothed shark from 300 million years ago. Its teeth form a deadly vertical blade."},44:{id:44,name:"Frilled Shark",types:["deepsea","leviathan"],baseStats:{hp:90,attack:95,defense:80,spAttack:90,spDefense:85,speed:70},learnableMoves:[{level:1,moveId:1},{level:1,moveId:2},{level:1,moveId:30},{level:20,moveId:31},{level:30,moveId:140},{level:40,moveId:170},{level:50,moveId:161}],description:"A living fossil from the deep trenches. Its eel-like body and primitive features are unchanged for millennia."},45:{id:45,name:"Whale Shark",types:["fairy","algae"],baseStats:{hp:120,attack:60,defense:90,spAttack:85,spDefense:95,speed:55},learnableMoves:[{level:1,moveId:1},{level:1,moveId:120},{level:1,moveId:100},{level:20,moveId:121},{level:30,moveId:101},{level:40,moveId:13},{level:50,moveId:42}],description:"The gentle giant of the ocean. Despite its massive size, it feeds only on tiny plankton."},46:{id:46,name:"Great White Shark",types:["leviathan"],baseStats:{hp:95,attack:120,defense:85,spAttack:80,spDefense:80,speed:90},learnableMoves:[{level:1,moveId:1},{level:1,moveId:2},{level:15,moveId:20},{level:25,moveId:31},{level:35,moveId:140},{level:45,moveId:170},{level:55,moveId:23}],description:"The apex predator of the ocean. Its power and ferocity are legendary among all sharks."}};function vt(e){return as[e]}const rs={1:{id:1,name:"SHARK BALL",type:"ball",description:"A standard ball for catching wild sharks.",price:200,catchRate:1},2:{id:2,name:"GREAT BALL",type:"ball",description:"A better ball with higher catch rate.",price:600,catchRate:1.5},3:{id:3,name:"ULTRA BALL",type:"ball",description:"A high-performance catching ball.",price:1200,catchRate:2},4:{id:4,name:"MASTER BALL",type:"ball",description:"The ultimate ball. Never fails.",price:0,catchRate:255},10:{id:10,name:"POTION",type:"potion",description:"Restores 20 HP.",price:300,healAmount:20},11:{id:11,name:"SUPER POTION",type:"potion",description:"Restores 50 HP.",price:700,healAmount:50},12:{id:12,name:"HYPER POTION",type:"potion",description:"Restores 200 HP.",price:1200,healAmount:200},13:{id:13,name:"MAX POTION",type:"potion",description:"Fully restores HP.",price:2500,healAmount:9999},20:{id:20,name:"ANTIDOTE",type:"status",description:"Cures poison.",price:100},21:{id:21,name:"PARALYZE HEAL",type:"status",description:"Cures paralysis.",price:200},22:{id:22,name:"AWAKENING",type:"status",description:"Wakes up a sleeping shark.",price:250},23:{id:23,name:"BURN HEAL",type:"status",description:"Heals burns.",price:250},24:{id:24,name:"ICE HEAL",type:"status",description:"Thaws a frozen shark.",price:250},25:{id:25,name:"FULL HEAL",type:"status",description:"Cures all status conditions.",price:600},30:{id:30,name:"REPEL",type:"battle",description:"Repels weak wild sharks for 100 steps.",price:350},31:{id:31,name:"SUPER REPEL",type:"battle",description:"Repels weak wild sharks for 200 steps.",price:500},32:{id:32,name:"MAX REPEL",type:"battle",description:"Repels weak wild sharks for 250 steps.",price:700},33:{id:33,name:"ESCAPE ROPE",type:"battle",description:"Escape from caves and dungeons.",price:550},50:{id:50,name:"TM01",type:"tm",description:"Teaches CONFUSION. A weak psychic attack.",price:0,tmMoveId:40},51:{id:51,name:"TM02",type:"tm",description:"Teaches THUNDERBOLT. A strong electrical attack.",price:0,tmMoveId:52},52:{id:52,name:"TM03",type:"tm",description:"Teaches SHADOW BALL. Hurls a shadowy blob.",price:0,tmMoveId:132},53:{id:53,name:"TM04",type:"tm",description:"Teaches IRON TAIL. Slams with a steel-hard tail.",price:3e3,tmMoveId:73},54:{id:54,name:"TM05",type:"tm",description:"Teaches FLAME BURST. A burst of spreading flames.",price:3e3,tmMoveId:62},55:{id:55,name:"TM06",type:"tm",description:"Teaches ICE FANG. Bites with freezing fangs.",price:5e3,tmMoveId:111}};function Ee(e){return rs[e]}function ns(e,t,o,s){const p=(3*e-2*t)/(3*e)*o*s;return Math.min(p/255,1)}function is(e,t,o,s){if(s>=255)return{success:!0,shakes:3};const a=ns(e,t,o,s);let p=0;for(let m=0;m<4&&Math.random()<a;m++)p++;return{success:p>=4,shakes:Math.min(p,3)}}function ls(e){return{1:45,2:45,3:45,4:45,5:45,6:45,7:45,8:45,9:45,10:120,11:60,12:190,13:255,14:190,15:190,16:190,17:190,18:150,19:150,20:60,21:75,22:90,23:45,24:60,25:75,26:75,27:60,28:90,29:45,30:60,31:3}[e]||100}let me=0,Ue=!1,ot=0;function fo(){me=0,Ue=!1,ot=0}function cs(e){const t=Le();if(e==="up")me>0&&me--;else if(e==="down")me<t.length-1&&me++;else if(e==="a")if(Ue){if(ot!==me){const o=t[ot];t[ot]=t[me],t[me]=o}return Ue=!1,"switch"}else Ue=!0,ot=me;else if(e==="b")if(Ue)Ue=!1;else return"close";return null}function ds(e){const t=Le();if(e==="up")me>0&&me--;else if(e==="down")me<t.length-1&&me++;else{if(e==="a")return t[me].currentHp<=0||me===0?null:{action:"switch",index:me};if(e==="b")return{action:"close"}}return null}function Vt(e=!1){const t=be();t.fillStyle=k.BLACK,t.fillRect(0,0,S,ee),t.fillStyle=k.DARK,t.fillRect(0,0,S,12),ze(e?"SWITCH SHARK":"PARTY",0,S,2,3);const s=Le();Ne(`${s.length}/6`,0,S-4,2,2),t.fillStyle=k.WHITE,t.fillRect(2,14,S-4,112),t.strokeStyle=k.BLACK,t.strokeRect(1.5,13.5,S-3,113);const a=18,p=16;for(let m=0;m<s.length;m++){const O=s[m],w=p+m*a;m===me?(t.fillStyle=k.LIGHT,t.fillRect(4,w,S-8,a-2),t.strokeStyle=k.BLACK,t.strokeRect(3.5,w-.5,S-7,a-1)):m%2===0&&(t.fillStyle=k.WHITE,t.fillRect(4,w,S-8,a-2)),Ue&&m===ot&&(t.fillStyle=k.DARK,t.fillRect(6,w+2,4,a-6)),m===me&&A(">",6,w+2,0);const N=(O.nickname||O.species.name).substring(0,8);A(N,16,w+2,0),A(`L${O.level}`,82,w+2,0),ps(16,w+11,48,O);const V=`${O.currentHp}`;A(V,68,w+10,1),O.currentHp<=0?(t.fillStyle=k.DARK,t.fillRect(120,w+2,28,8),A("FNT",124,w+3,3)):m===0&&(t.fillStyle=k.BLACK,t.fillRect(112,w+2,36,8),A("LEAD",116,w+3,3))}for(let m=s.length;m<6;m++){const O=p+m*a;t.fillStyle=k.LIGHT,t.fillRect(4,O,S-8,a-2),ze("- EMPTY -",4,S-8,O+5,1)}t.fillStyle=k.BLACK,t.fillRect(0,128,S,16),Ue?(A("MOVE TO:",4,132,2),A("X:CANCEL",88,132,2)):e?(A("Z:SEND",4,132,3),A("X:BACK",104,132,2)):(A("Z:SWAP",4,132,3),A("X:CLOSE",100,132,2))}function ps(e,t,o,s){const a=be(),p=s.maxHp>0?s.currentHp/s.maxHp:0,m=Math.max(0,Math.floor(o*p));a.fillStyle=k.DARK,a.fillRect(e,t,o,3),p>.5?a.fillStyle=k.WHITE:p>.2?a.fillStyle=k.LIGHT:a.fillStyle=k.DARK,m>0&&a.fillRect(e,t,m,3),a.strokeStyle=k.BLACK,a.strokeRect(e-.5,t-.5,o+1,4)}function Mt(e,t){const o=_t(e,t),s=e.learnableMoves.filter(a=>a.level<=t).slice(-4).map(a=>{const p=je(a.moveId);if(!p)throw new Error(`Move ${a.moveId} not found`);return{move:p,currentPp:p.pp}});return{species:e,level:t,currentHp:o.hp,maxHp:o.hp,stats:o,moves:s,status:null,exp:ho(t)}}function uo(e,t,o=!0){return{playerCreature:e,enemyCreature:t,phase:"intro",message:"",messageQueue:[],menuIndex:0,moveMenuIndex:0,playerAction:null,enemyAction:null,isWildBattle:o,canRun:!0,animatingHp:{player:e.currentHp,enemy:t.currentHp}}}function mo(e){const t=e.enemyCreature.species.name;e.isWildBattle?q(e,`Wild ${t} appeared!`):q(e,`${t} wants to fight!`);const o=e.playerCreature.nickname||e.playerCreature.species.name;q(e,`Go! ${o}!`),Be(e)}function q(e,t){e.messageQueue.push(t)}function Be(e){e.messageQueue.length>0&&(e.message=e.messageQueue.shift(),Bt(e.message))}function Lt(e,t){switch(e.phase){case"intro":case"message":if(t==="a"||t==="b")if(e.messageQueue.length>0)Be(e);else if(e.playerCreature.currentHp<=0)e.phase="defeat";else if(e.enemyCreature.currentHp<=0)e.phase="victory";else{e.phase="select-action";const o=e.playerCreature.nickname||e.playerCreature.species.name;Bt(`What will ${o} do?`,!0)}break;case"select-action":fs(e,t);break;case"select-move":hs(e,t);break}}function fs(e,t){switch(t){case"up":e.menuIndex>=2&&(e.menuIndex-=2);break;case"down":e.menuIndex<=1&&(e.menuIndex+=2);break;case"left":e.menuIndex%2===1&&e.menuIndex--;break;case"right":e.menuIndex%2===0&&e.menuIndex++;break;case"a":us(e);break}}function us(e){switch(e.menuIndex){case 0:e.phase="select-move",e.moveMenuIndex=0;break;case 1:e.isWildBattle?ms(e):(q(e,"Can't use items in trainer battles!"),e.phase="message",Be(e));break;case 2:const t=Le(),o=t.slice(1).some(s=>s.currentHp>0);t.length<=1||!o?(q(e,"No other sharks!"),e.phase="message",Be(e)):(fo(),ke("battle-party"));break;case 3:e.canRun&&e.isWildBattle?(q(e,"Got away safely!"),e.phase="victory",Be(e)):(q(e,"Can't escape!"),e.phase="message",Be(e));break}}function ms(e){const o=Io().find(O=>{const w=Ee(O.itemId);return(w==null?void 0:w.type)==="ball"&&O.quantity>0});if(!o){q(e,"No Shark Balls!"),e.phase="message",Be(e);return}const s=Ee(o.itemId);At(o.itemId,1),q(e,`Used ${s.name}!`);const a=e.enemyCreature,p=ls(a.species.id),m=is(a.maxHp,a.currentHp,p,s.catchRate||1);if(m.shakes>=1&&q(e,"The ball shook..."),m.shakes>=2&&q(e,"The ball shook again..."),m.shakes>=3&&q(e,"The ball shook once more..."),m.success){if(q(e,`Gotcha! ${a.species.name} was caught!`),bo()){const O={species:a.species,level:a.level,currentHp:a.currentHp,maxHp:a.maxHp,stats:{...a.stats},moves:a.moves.map(w=>({...w})),status:a.status,exp:a.exp};Bs(O),q(e,`${a.species.name} joined your team!`)}else q(e,"Party is full!"),q(e,`${a.species.name} was sent to storage.`);e.phase="victory"}else{q(e,"Oh no! It broke free!");const O=Math.floor(Math.random()*e.enemyCreature.moves.length);if(e.enemyAction={type:"fight",moveIndex:O},pt(e,"enemy"),e.playerCreature.currentHp<=0){const w=e.playerCreature.nickname||e.playerCreature.species.name;q(e,`${w} fainted!`)}}e.phase="message",Be(e)}function hs(e,t){const o=e.playerCreature.moves.length;switch(t){case"up":e.moveMenuIndex>0&&e.moveMenuIndex--;break;case"down":e.moveMenuIndex<o-1&&e.moveMenuIndex++;break;case"a":ys(e);break;case"b":e.phase="select-action";const s=e.playerCreature.nickname||e.playerCreature.species.name;Bt(`What will ${s} do?`,!0);break}}function ys(e){if(e.playerCreature.moves[e.moveMenuIndex].currentPp<=0){q(e,"No PP left!"),e.phase="message",Be(e);return}e.playerAction={type:"fight",moveIndex:e.moveMenuIndex};const o=Math.floor(Math.random()*e.enemyCreature.moves.length);e.enemyAction={type:"fight",moveIndex:o},vs(e)}function vs(e){var a;e.phase="executing";const t=e.playerCreature.stats.speed,o=e.enemyCreature.stats.speed;if(t>=o||t===o&&Math.random()<.5?(pt(e,"player"),e.enemyCreature.currentHp>0&&pt(e,"enemy")):(pt(e,"enemy"),e.playerCreature.currentHp>0&&pt(e,"player")),e.playerCreature.currentHp<=0){const p=e.playerCreature.nickname||e.playerCreature.species.name;q(e,`${p} fainted!`)}else if(e.enemyCreature.currentHp<=0){q(e,`Enemy ${e.enemyCreature.species.name} fainted!`);const p=gs(e.enemyCreature);q(e,`Gained ${p} EXP!`);const m=Is(e.playerCreature,p);for(const w of m)q(e,w);const O=bs(e.playerCreature);if(O){const w=e.playerCreature.species.name;ws(e.playerCreature,O),q(e,`What? ${w} is evolving!`),q(e,`${w} evolved into ${O.name}!`)}if(!e.isWildBattle&&Es()){const w=Ls();if(w){const N=jt(),V=((a=N==null?void 0:N.trainer)==null?void 0:a.name)||"Trainer";q(e,`${V} sent out ${w.species.name}!`),e.enemyCreature=w,e.animatingHp.enemy=w.currentHp}}else if(!e.isWildBattle){const w=jt();w!=null&&w.trainer&&(q(e,`Defeated ${w.trainer.name}!`),q(e,`Got $${w.trainer.prizeMoney} for winning!`))}}e.phase="message",Be(e)}function pt(e,t){const o=t==="player",s=o?e.playerCreature:e.enemyCreature,a=o?e.enemyCreature:e.playerCreature,p=o?e.playerAction:e.enemyAction;if(!p||p.type!=="fight")return;const m=s.moves[p.moveIndex];if(!m)return;const O=m.move,w=s.nickname||s.species.name;m.currentPp--,q(e,`${w} used ${O.name}!`);const N=os(s,a,O);if(N.damage===0&&O.power>0)if(N.effectiveness===0){const V=a.nickname||a.species.name;q(e,`It doesn't affect ${V}...`)}else q(e,`${w}'s attack missed!`);else if(N.damage>0){a.currentHp=Math.max(0,a.currentHp-N.damage);const V=ts(N.effectiveness);V&&q(e,V),N.isCritical&&q(e,"A critical hit!")}}function gs(e){const t=Os(e.species.id);return Math.floor(t*e.level/7)}function Os(e){return{1:62,4:62,7:62,2:142,5:142,8:142,3:239,6:239,9:239,10:60,11:170,12:56,13:50,14:54,15:55,16:58,17:57,18:65,19:75,20:178,21:175,22:70,23:180,24:165,25:170,26:172,27:175,28:161,29:180,30:150,31:270}[e]||64}function ho(e){return Math.floor(Math.pow(e,3))}function Is(e,t){const o=[];for(e.exp+=t;e.exp>=ho(e.level+1)&&e.level<100;){e.level++,o.push(`${e.species.name} grew to LV ${e.level}!`);const s=e.maxHp;e.stats=_t(e.species,e.level),e.maxHp=e.stats.hp;const a=e.maxHp-s;e.currentHp=Math.min(e.currentHp+a,e.maxHp);const p=yo(e);for(const m of p)o.push(`${e.species.name} learned ${m}!`)}return o}function yo(e){const t=[];for(const o of e.species.learnableMoves)if(o.level===e.level){const s=je(o.moveId);if(!s||e.moves.some(p=>p.move.id===s.id))continue;const a={move:s,currentPp:s.pp};e.moves.length<4||e.moves.shift(),e.moves.push(a),t.push(s.name)}return t}function bs(e){const t=e.species.evolvesTo;return t&&e.level>=t.level&&vt(t.speciesId)||null}function ws(e,t){e.species=t;const o=e.maxHp;e.stats=_t(t,e.level),e.maxHp=e.stats.hp;const s=e.currentHp/o;e.currentHp=Math.floor(e.maxHp*s),yo(e)}function ks(e,t){if(e.animatingHp.player!==e.playerCreature.currentHp){const s=e.playerCreature.currentHp-e.animatingHp.player,a=Math.sign(s)*Math.min(Math.abs(s),50*t/1e3);e.animatingHp.player+=a,Math.abs(e.animatingHp.player-e.playerCreature.currentHp)<.5&&(e.animatingHp.player=e.playerCreature.currentHp)}if(e.animatingHp.enemy!==e.enemyCreature.currentHp){const s=e.enemyCreature.currentHp-e.animatingHp.enemy,a=Math.sign(s)*Math.min(Math.abs(s),50*t/1e3);e.animatingHp.enemy+=a,Math.abs(e.animatingHp.enemy-e.enemyCreature.currentHp)<.5&&(e.animatingHp.enemy=e.enemyCreature.currentHp)}}let ce,We=null,le=null,rt=0,mt=500,Ve=[{itemId:1,quantity:5},{itemId:10,quantity:3}];const As=6;function Ss(){ce={mode:"overworld",overworld:{player:{x:10,y:14,pixelX:80,pixelY:112,facing:"up",isMoving:!1,isSwimming:!1,moveProgress:0,party:[]},currentMap:null,maps:new Map}}}function nt(){return ce.overworld.player}function vo(){return ce.mode}function ke(e){ce.mode=e}function Tt(){return ce.overworld.currentMap}function go(e){ce.overworld.currentMap=e,ce.overworld.maps.set(e.id,e)}function Ms(e){return ce.overworld.maps.get(e)}function De(e){ce.overworld.maps.set(e.id,e)}function Yt(){return We}function Ts(e){const t=ce.overworld.player.party[0];if(!t)throw new Error("No creature in party");le=null,rt=0,We=uo(t,e,!0),mo(We),ce.mode="battle"}function xs(e){if(!e.trainer||e.defeated)return;const t=ce.overworld.player.party[0];if(!t)throw new Error("No creature in party");le=e,rt=0;const o=e.trainer.team[0],s=vt(o.speciesId);if(!s)throw new Error("Trainer species not found");const a=Mt(s,o.level);We=uo(t,a,!1),We.canRun=!1,mo(We),ce.mode="battle"}function jt(){return le}function Oo(){return mt}function Cs(e){mt+=e}function Rs(e){return mt<e?!1:(mt-=e,!0)}function Es(){return le!=null&&le.trainer?rt<le.trainer.team.length-1:!1}function Ls(){if(!(le!=null&&le.trainer))return null;rt++;const e=le.trainer.team[rt];if(!e)return null;const t=vt(e.speciesId);return t?Mt(t,e.level):null}function Hs(){if(We){const e=ce.overworld.player.party[0],t=We.playerCreature;e.currentHp=t.currentHp,e.moves=t.moves,e.exp=t.exp,e.level=t.level,e.stats=t.stats,e.maxHp=t.maxHp,e.species=t.species,le!=null&&le.trainer&&We.phase==="victory"&&(le.defeated=!0,mt+=le.trainer.prizeMoney,le.id==="gym-leader-marina"?wt(50,1):le.id==="gym-leader-volt"?wt(51,1):le.id==="finner-boss"&&wt(52,1))}We=null,le=null,rt=0,ce.mode="overworld"}function Ds(){for(const e of ce.overworld.player.party){e.currentHp=e.maxHp;for(const t of e.moves)t.currentPp=t.move.pp}}function Io(){return Ve}function Ps(e){const t=Ve.find(o=>o.itemId===e);return(t==null?void 0:t.quantity)||0}function wt(e,t=1){const o=Ve.find(s=>s.itemId===e);o?o.quantity+=t:Ve.push({itemId:e,quantity:t})}function At(e,t=1){const o=Ve.find(s=>s.itemId===e);if(!o||o.quantity<t)return!1;if(o.quantity-=t,o.quantity<=0){const s=Ve.indexOf(o);Ve.splice(s,1)}return!0}function bo(){return ce.overworld.player.party.length<As}function Bs(e){return bo()?(ce.overworld.player.party.push(e),!0):!1}function Le(){return ce.overworld.player.party}function Ws(e){const t=vt(e);if(!t)throw new Error("Starter species not found");const o=Mt(t,5);ce.overworld.player.party=[o]}const Pe=8,St=16;function _s(){no();const e=nt(),t=Tt();if(!t)return;const o=Math.floor(e.pixelX-S/2+St/2),s=Math.floor(e.pixelY-ee/2+St/2),a=t.width*Pe-S,p=t.height*Pe-ee,m=Math.max(0,Math.min(o,a)),O=Math.max(0,Math.min(s,p));Ys(t,m,O),Xs(t,m,O),Ns(e,m,O),$s(t.name)}function Ys(e,t,o){var O;const s=Math.floor(t/Pe),a=Math.floor(o/Pe),p=Math.min(s+Math.ceil(S/Pe)+1,e.width),m=Math.min(a+Math.ceil(ee/Pe)+1,e.height);for(let w=a;w<m;w++)for(let N=s;N<p;N++){const V=(O=e.tiles[w])==null?void 0:O[N];if(V!==void 0){const Z=N*Pe-t,ge=w*Pe-o;Qo(V,Z,ge)}}}function Xs(e,t,o){for(const s of e.npcs){const a=s.x*Pe-t,p=s.y*Pe-o;a>=-St&&a<S&&p>=-St&&p<ee&&po(a-4,p-8,s.facing,0,!1)}}function Ns(e,t,o){const s=e.pixelX-t,a=e.pixelY-o;let p=0;if(e.isMoving){const m=e.moveProgress*4,O=Math.floor(m)%4;p=O===1?1:O===3?2:0}po(s-4,a-8,e.facing,p,e.isSwimming)}function $s(e){const t=e.length*8,o=Math.floor((S-t)/2);A(e.toUpperCase(),o,2)}let qe=0,st=0;const at=[{id:1,name:"BLACKNOSE",type:"FIRE",desc1:"SPEEDY HUNTER",desc2:"FIERY METABOLISM"},{id:4,name:"WHITENOSE",type:"FIGHT",desc1:"BOLD BRAWLER",desc2:"FEARS NOTHING"},{id:7,name:"HARDNOSE",type:"STEEL",desc1:"ARMORED TANK",desc2:"TOUGH AS NAILS"}];function Ks(){qe=0,st=0}function Fs(){return at[qe].id}function Gs(e){if(e==="left")qe=(qe-1+at.length)%at.length,st=0;else if(e==="right")qe=(qe+1)%at.length,st=0;else if(e==="a")return"select";return null}function Us(){const e=be();st++,e.fillStyle=k.BLACK,e.fillRect(0,0,S,ee),e.fillStyle=k.LIGHT,e.fillRect(0,0,S,2),e.fillRect(0,10,S,1),e.fillStyle=k.DARK,e.fillRect(0,2,S,8),ze("CHOOSE YOUR PARTNER",0,S,3,3),e.fillStyle=k.LIGHT,e.fillRect(4,14,S-8,80),e.fillStyle=k.WHITE,e.fillRect(6,16,S-12,76),e.strokeStyle=k.BLACK,e.strokeRect(5.5,15.5,S-11,77);const t=at[qe],o=Math.sin(st*.1)*2,s=Math.floor((S-48)/2),a=20+o;Pt(t.id,s,a,!0);const p=(t.type.length+2)*8,m=Math.floor((S-p)/2);e.fillStyle=k.DARK,e.fillRect(m,70,p,10),A(t.type,m+8,72,3),e.fillStyle=k.BLACK,e.fillRect(20,82,S-40,12),ze(t.name,0,S,84,3),Math.sin(st*.15)>0&&(A("<",10,44,0),A(">",S-18,44,0));const w=96;for(let N=0;N<at.length;N++){const V=68+N*12;N===qe?(e.fillStyle=k.BLACK,e.fillRect(V,w,5,5)):(e.fillStyle=k.DARK,e.fillRect(V+1,w+1,3,3))}e.fillStyle=k.DARK,e.fillRect(0,104,S,28),ze(t.desc1,0,S,108,3),ze(t.desc2,0,S,118,2),e.fillStyle=k.BLACK,e.fillRect(0,132,S,12),A("</>:PICK",8,134,2),A("Z:SELECT",S-72,134,3)}const ht=20,Qe=4,wo=5,$e=8,Xt=6,zs=["BOX 1","BOX 2","BOX 3","BOX 4","BOX 5","BOX 6","BOX 7","BOX 8"];let he;function qs(){const e=[];for(let t=0;t<$e;t++)e.push({name:zs[t],creatures:new Array(ht).fill(null)});he={boxes:e,currentBox:0}}function ko(){return he.boxes[he.currentBox]}function Ao(){return he.currentBox}function Zs(){he.currentBox=(he.currentBox+1)%$e}function Qs(){he.currentBox=(he.currentBox-1+$e)%$e}function Vs(e){return e<0||e>=$e?"":he.boxes[e].name}function js(e,t){const o=Le();if(o.length>=Xt||e<0||e>=$e||t<0||t>=ht)return!1;const s=he.boxes[e].creatures[t];return s===null?!1:(o.push(s),he.boxes[e].creatures[t]=null,!0)}function Js(e,t,o,s){if(e<0||e>=$e||o<0||o>=$e||t<0||t>=ht||s<0||s>=ht)return!1;const a=he.boxes[e].creatures[t];if(a===null)return!1;const p=he.boxes[o].creatures[s];return he.boxes[e].creatures[t]=p,he.boxes[o].creatures[s]=a,!0}function ea(e,t,o){const s=Le();if(e<0||e>=s.length||t<0||t>=$e||o<0||o>=ht)return!1;const a=s[e],p=he.boxes[t].creatures[o];return p===null?s.length<=1?!1:(he.boxes[t].creatures[o]=a,s.splice(e,1),!0):(s[e]=p,he.boxes[t].creatures[o]=a,!0)}let Y;function ta(){Y={mode:"box",boxCursor:0,partyCursor:0,selectedCreature:null,action:"none"}}function oa(e){const t=Le(),o=ko();return e==="l"?(Qs(),null):e==="r"?(Zs(),null):e==="b"?Y.selectedCreature?(Y.selectedCreature=null,Y.action="none",null):"close":Y.mode==="box"?sa(e,o,t):aa(e,o,t)}function sa(e,t,o){const s=Y.boxCursor%Qe,a=Math.floor(Y.boxCursor/Qe);if(e==="up")a>0&&(Y.boxCursor-=Qe);else if(e==="down")a<wo-1&&(Y.boxCursor+=Qe);else if(e==="left")s>0?Y.boxCursor--:(Y.mode="party",Y.partyCursor=Math.min(a,o.length-1),Y.partyCursor<0&&(Y.partyCursor=0));else if(e==="right")s<Qe-1&&Y.boxCursor++;else if(e==="a")return ra(t,o);return null}function aa(e,t,o){if(e==="up")Y.partyCursor>0&&Y.partyCursor--;else if(e==="down")Y.partyCursor<o.length-1&&Y.partyCursor++;else if(e==="right")Y.mode="box";else if(e!=="left"){if(e==="a")return na(t,o)}return null}function ra(e,t){const o=Ao(),s=Y.boxCursor,a=e.creatures[s];if(Y.selectedCreature===null)a&&(Y.selectedCreature={source:"box",boxIndex:o,slotIndex:s},Y.action="selecting");else if(Y.selectedCreature.source==="box"){const p=Y.selectedCreature.boxIndex,m=Y.selectedCreature.slotIndex;return Js(p,m,o,s),Y.selectedCreature=null,Y.action="none","action"}else if(t.length>1||a!==null)return ea(Y.selectedCreature.slotIndex,o,s),Y.selectedCreature=null,Y.action="none","action";return null}function na(e,t){const o=Y.partyCursor;if(o>=t.length)return null;if(Y.selectedCreature===null)Y.selectedCreature={source:"party",slotIndex:o},Y.action="selecting";else if(Y.selectedCreature.source==="party")Y.selectedCreature=null,Y.action="none";else if(t.length<Xt)return js(Y.selectedCreature.boxIndex,Y.selectedCreature.slotIndex),Y.selectedCreature=null,Y.action="none","action";return null}function ia(){const e=be(),t=Le(),o=ko(),s=Ao(),a=Vs(s);e.fillStyle=k.WHITE,e.fillRect(0,0,S,ee),e.fillStyle=k.DARK,e.fillRect(0,0,S,14),A("<",4,3,3);const p=a.length>8?a.substring(0,7)+".":a;A(p,12,3,3);const m=`${s+1}/8`;Ne(m,0,S-12,3,3),A(">",S-8,3,3);const O=4,w=18,N=18,V=18;for(let te=0;te<wo;te++)for(let we=0;we<Qe;we++){const He=te*Qe+we,xe=O+we*N,lt=w+te*V,Ft=o.creatures[He];if(e.fillStyle=k.LIGHT,e.fillRect(xe,lt,N-4,V-4),e.strokeStyle=k.DARK,e.strokeRect(xe+.5,lt+.5,N-5,V-5),Ft){const Mo=Ft.species.name.substring(0,2).toUpperCase();A(Mo,xe+2,lt+5,0)}Y.mode==="box"&&Y.boxCursor===He&&(e.strokeStyle=k.BLACK,e.lineWidth=2,e.strokeRect(xe+.5,lt+.5,N-5,V-5),e.lineWidth=1),Y.selectedCreature&&Y.selectedCreature.source==="box"&&Y.selectedCreature.boxIndex===s&&Y.selectedCreature.slotIndex===He&&(e.fillStyle=k.BLACK,e.fillRect(xe+N-8,lt+1,4,4))}const Z=94,ge=18,Ae=18;e.fillStyle=k.DARK;const Se=S-Z-4;e.fillRect(Z,ge-2,Se,10),ze("PARTY",Z,Se,ge,3);for(let te=0;te<Xt;te++){const we=ge+10+te*Ae,He=t[te];if(te<t.length?e.fillStyle=k.LIGHT:e.fillStyle=k.WHITE,e.fillRect(Z,we,S-Z-4,Ae-2),He){const xe=He.species.name.length>6?He.species.name.substring(0,5)+".":He.species.name;A(xe,Z+2,we+5,0)}else te<t.length&&A("---",Z+2,we+5,2);Y.mode==="party"&&Y.partyCursor===te&&te<t.length&&(e.strokeStyle=k.BLACK,e.lineWidth=2,e.strokeRect(Z+.5,we+.5,S-Z-5,Ae-3),e.lineWidth=1),Y.selectedCreature&&Y.selectedCreature.source==="party"&&Y.selectedCreature.slotIndex===te&&(e.fillStyle=k.BLACK,e.fillRect(S-10,we+2,4,4))}e.fillStyle=k.BLACK,e.fillRect(0,ee-14,S,14),Y.selectedCreature?A("Z:PLACE X:CANCEL",4,ee-10,3):A("Z:SEL X:EXIT",4,ee-10,3),A("L/R:BOX",S-56,ee-10,3)}let _={shop:null,mode:"buy",cursor:0,quantity:1,phase:"browse",message:null};function la(e){_={shop:e,mode:"buy",cursor:0,quantity:1,phase:"browse",message:null}}function Nt(){return Io().filter(e=>{const t=Ee(e.itemId);return t&&t.price>0})}function ca(e){return _.shop?_.message?(_.message=null,null):_.phase==="browse"?da(e):_.phase==="quantity"?pa(e):null:"close"}function da(e){const t=_.mode==="buy"?_.shop.items:Nt();if(e==="up")_.cursor>0&&_.cursor--;else if(e==="down")_.cursor<t.length-1&&_.cursor++;else if(e==="left"||e==="right")_.mode=_.mode==="buy"?"sell":"buy",_.cursor=0;else if(e==="a")t.length>0&&(_.quantity=1,_.phase="quantity");else if(e==="b")return"close";return null}function pa(e){const o=(_.mode==="buy"?_.shop.items:Nt())[_.cursor];if(!o)return _.phase="browse",null;const s=Ee(o.itemId);if(!s)return _.phase="browse",null;const a=_.mode==="buy"?Math.min(99,Math.floor(Oo()/s.price)):o.quantity||1;return e==="up"||e==="right"?_.quantity<a&&_.quantity++:e==="down"||e==="left"?_.quantity>1&&_.quantity--:e==="a"?(_.mode==="buy"?fa(s.id,_.quantity):ua(s.id,_.quantity),_.phase="browse"):e==="b"&&(_.phase="browse"),null}function fa(e,t){const o=Ee(e);if(!o)return;const s=o.price*t;Rs(s)?(wt(e,t),_.message=`Bought ${t} ${o.name}!`):_.message="Not enough money!"}function ua(e,t){const o=Ee(e);if(!o)return;if(Ps(e)<t){_.message="Not enough items!";return}const a=Math.floor(o.price/2)*t;At(e,t)&&(Cs(a),_.message=`Sold for $${a}!`)}function ma(){var N,V;const e=be();if(!_.shop)return;e.fillStyle=k.WHITE,e.fillRect(0,0,S,ee),e.fillStyle=k.DARK,e.fillRect(0,0,S,14),A(_.shop.name,4,3,3);const t=`$${Oo()}`;Ne(t,0,S-4,3,3);const o=_.mode==="buy"?0:2,s=_.mode==="sell"?0:2;e.fillStyle=_.mode==="buy"?k.LIGHT:k.WHITE,e.fillRect(4,16,36,12),e.fillStyle=_.mode==="sell"?k.LIGHT:k.WHITE,e.fillRect(44,16,36,12),A("BUY",10,19,o),A("SELL",48,19,s);const a=_.mode==="buy"?_.shop.items:Nt(),p=32,m=12,O=8,w=Math.max(0,_.cursor-O+1);for(let Z=0;Z<Math.min(a.length,O);Z++){const ge=Z+w;if(ge>=a.length)break;const Ae=a[ge],Se=Ee(Ae.itemId);if(!Se)continue;const te=p+Z*m,we=ge===_.cursor;we&&(e.fillStyle=k.LIGHT,e.fillRect(4,te,S-8,m-1)),we&&A(">",6,te+2,0);const He=Se.name.length>10?Se.name.substring(0,9)+".":Se.name;if(A(He,16,te+2,0),_.mode==="buy"){const xe=`$${Se.price}`;Ne(xe,0,S-8,te+2,0)}else{const xe=`x${Ae.quantity}`;Ne(xe,0,S-8,te+2,0)}}if(a.length===0){const Z=_.mode==="buy"?"No items available":"Nothing to sell";A(Z,20,p+20,2)}if(e.fillStyle=k.BLACK,e.fillRect(0,ee-28,S,28),_.message)A(_.message,8,ee-24,3),A("Press any key...",8,ee-12,3);else if(_.phase==="quantity"){const Z=Ee(((N=a[_.cursor])==null?void 0:N.itemId)||0);if(Z){const Ae=(_.mode==="buy"?Z.price:Math.floor(Z.price/2))*_.quantity;A(`HOW MANY? <${String(_.quantity).padStart(2,"0")}>`,8,ee-24,3);const Se=`$${Ae}`;Ne(Se,0,S-8,ee-24,3);const te=_.mode==="buy"?"BUY":"SELL";A(`Z:${te}  X:CANCEL`,8,ee-12,3)}}else{if(a.length>0){const Z=Ee(((V=a[_.cursor])==null?void 0:V.itemId)||0);if(Z){const ge=Z.description.length>30?Z.description.substring(0,29)+".":Z.description;A(ge,8,ee-24,3)}}A("Z:SELECT  X:EXIT",8,ee-12,3)}}function $t(e,t){return!1}function gt(e){const t=Ee(e);return!t||t.type!=="tm"||!t.tmMoveId?null:t.tmMoveId}function Kt(e,t){return e.moves.some(o=>o.move.id===t)}function Jt(e,t,o){if(!$t())return{success:!1,message:`${e.species.name} can't learn this move!`};const s=gt(t);if(!s)return{success:!1,message:"Invalid TM!"};const a=je(s);if(!a)return{success:!1,message:"Move not found!"};if(Kt(e,s))return{success:!1,message:`${e.species.name} already knows ${a.name}!`};if(e.moves.length<4)return e.moves.push({move:a,currentPp:a.pp}),{success:!0,message:`${e.species.name} learned ${a.name}!`};if(o===void 0||o<0||o>=4)return{success:!1,message:"Must choose a move to replace!"};const p=e.moves[o].move.name;return e.moves[o]={move:a,currentPp:a.pp},{success:!0,message:`${e.species.name} forgot ${p} and learned ${a.name}!`}}let Xe=0,Re=0,ve="select-creature",Ye=0,tt="";function ha(e){const t=Le();if(ve==="select-creature"){if(e==="up")Re>0&&Re--;else if(e==="down")Re<t.length-1&&Re++;else if(e==="a"){const o=t[Re],s=gt(Xe);if(!$t())return tt=`${o.species.name} can't learn this move!`,ve="result",null;if(s&&Kt(o,s)){const a=je(s);return tt=`Already knows ${(a==null?void 0:a.name)||"this move"}!`,ve="result",null}if(o.moves.length<4){const a=Jt(o,Xe);return tt=a.message,ve="result",a.success&&At(Xe,1),null}Ye=0,ve="select-move"}else if(e==="b")return"close"}else if(ve==="select-move"){const o=t[Re];e==="up"?Ye>0&&Ye--:e==="down"?Ye<o.moves.length-1&&Ye++:e==="a"?ve="confirm":e==="b"&&(ve="select-creature")}else if(ve==="confirm")if(e==="a"){const o=t[Re],s=Jt(o,Xe,Ye);tt=s.message,ve="result",s.success&&At(Xe,1)}else e==="b"&&(ve="select-move");else if(ve==="result"&&(e==="a"||e==="b"))return tt.includes("learned")?"used":"close";return null}function ya(){var p;const e=be(),t=Le(),o=Ee(Xe),s=gt(Xe),a=s?je(s):null;e.fillStyle=k.BLACK,e.fillRect(0,0,S,ee),e.fillStyle=k.DARK,e.fillRect(0,0,S,20),A((o==null?void 0:o.name)||"TM",4,2,3),a&&A(a.name,48,2,3),A(((p=a==null?void 0:a.type)==null?void 0:p.toUpperCase().substring(0,8))||"",4,11,2),ve==="select-creature"?va(t,s):ve==="select-move"?ga(t[Re]):ve==="confirm"?Oa(t[Re]):ve==="result"&&Ia()}function va(e,t){const o=be();A("Choose a shark:",4,22,3),o.fillStyle=k.WHITE,o.fillRect(2,30,S-4,96),o.strokeStyle=k.BLACK,o.strokeRect(1.5,29.5,S-3,97);const s=16,a=32;for(let p=0;p<e.length;p++){const m=e[p],O=a+p*s,w=$t(),N=t?Kt(m,t):!1;p===Re&&(o.fillStyle=k.LIGHT,o.fillRect(4,O,S-8,s-2)),p===Re&&A(">",6,O+4,0);const V=m.species.name.substring(0,8);A(V,14,O+4,w?0:1),A(`L${m.level}`,82,O+4,1),N?A("KNW",112,O+4,1):w?A("OK",136,O+4,0):A("NO",136,O+4,1)}o.fillStyle=k.BLACK,o.fillRect(0,128,S,16),A("Z:SELECT",8,132,3),A("X:CANCEL",100,132,2)}function ga(e){const t=be(),o=gt(Xe),s=o?je(o):null;A("Replace which move?",4,22,3),A(e.species.name,4,32,3),t.fillStyle=k.WHITE,t.fillRect(2,40,S-4,72),t.strokeStyle=k.BLACK,t.strokeRect(1.5,39.5,S-3,73);const a=16,p=44;for(let m=0;m<e.moves.length;m++){const O=e.moves[m],w=p+m*a;m===Ye&&(t.fillStyle=k.LIGHT,t.fillRect(4,w,S-8,a-2)),m===Ye&&A(">",6,w+4,0),A(O.move.name.substring(0,10),14,w+4,0),A(`${O.currentPp}/${O.move.pp}`,110,w+4,1)}t.fillStyle=k.DARK,t.fillRect(2,114,S-4,12),A("NEW:",6,117,3),s&&A(s.name.substring(0,10),40,117,3),t.fillStyle=k.BLACK,t.fillRect(0,128,S,16),A("Z:REPLACE",8,132,3),A("X:BACK",112,132,2)}function Oa(e){const t=be(),o=e.moves[Ye].move,s=gt(Xe),a=s?je(s):null;t.fillStyle=k.WHITE,t.fillRect(10,40,S-20,64),t.strokeStyle=k.BLACK,t.strokeRect(9.5,39.5,S-19,65),A("Forget",20,48,0),A(o.name+"?",20,58,0),A("Learn",20,74,0),A((a==null?void 0:a.name)||"???",20,84,0),t.fillStyle=k.BLACK,t.fillRect(0,128,S,16),A("Z:YES",30,132,3),A("X:NO",100,132,2)}function Ia(){const e=be();e.fillStyle=k.WHITE,e.fillRect(10,50,S-20,44),e.strokeStyle=k.BLACK,e.strokeRect(9.5,49.5,S-19,45);const t=tt.split(" ");let o="",s="";for(const a of t)o.length+a.length<16?o+=(o?" ":"")+a:s+=(s?" ":"")+a;A(o,16,60,0),s&&A(s,16,72,0),e.fillStyle=k.BLACK,e.fillRect(0,128,S,16),ze("Z:OK",0,S,132,3)}const ba={id:"coral-bay",name:"CORAL MARKET",items:[{itemId:1},{itemId:2},{itemId:10},{itemId:11},{itemId:20},{itemId:30}]},wa={id:"kelp-harbor",name:"HARBOR MART",items:[{itemId:1},{itemId:2},{itemId:3},{itemId:10},{itemId:11},{itemId:12},{itemId:20},{itemId:25},{itemId:30},{itemId:31},{itemId:33},{itemId:55,stock:1}]},ka={"coral-bay":ba,"kelp-harbor":wa};function Aa(e){return ka[e]}const Ie={up:!1,down:!1,left:!1,right:!1,a:!1,b:!1,start:!1,select:!1,l:!1,r:!1},Ce={...Ie},eo={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",KeyZ:"a",KeyX:"b",Enter:"start",ShiftRight:"select",KeyQ:"l",KeyE:"r",KeyW:"up",KeyS:"down",KeyA:"left",KeyD:"right"};function Sa(){window.addEventListener("keydown",e=>{const t=eo[e.code];t&&(e.preventDefault(),Ie[t]=!0)}),window.addEventListener("keyup",e=>{const t=eo[e.code];t&&(e.preventDefault(),Ie[t]=!1)})}function Ma(){Object.assign(Ce,Ie)}function Ke(){return{up:Ie.up&&!Ce.up,down:Ie.down&&!Ce.down,left:Ie.left&&!Ce.left,right:Ie.right&&!Ce.right,a:Ie.a&&!Ce.a,b:Ie.b&&!Ce.b,start:Ie.start&&!Ce.start,select:Ie.select&&!Ce.select,l:Ie.l&&!Ce.l,r:Ie.r&&!Ce.r}}function Ze(){const e=Ke();return e.up?"up":e.down?"down":e.left?"left":e.right?"right":null}function Ta(e){return Math.random()*100<e}function xa(e){if(e.length===0)return null;const t=e.reduce((m,O)=>m+O.weight,0);let o=Math.random()*t,s=null;for(const m of e)if(o-=m.weight,o<=0){s=m;break}s||(s=e[0]);const a=vt(s.speciesId);if(!a)return null;const p=s.minLevel+Math.floor(Math.random()*(s.maxLevel-s.minLevel+1));return Mt(a,p)}function Ca(e,t){return Ta(t)?xa(e.encounterTable):null}const ft=8,Ra=2;function Ea(e){const t=nt();if(t.isMoving){const o=Ra;switch(t.moveProgress+=o/ft,t.facing){case"up":t.pixelY-=o;break;case"down":t.pixelY+=o;break;case"left":t.pixelX-=o;break;case"right":t.pixelX+=o;break}t.moveProgress>=1&&(t.isMoving=!1,t.moveProgress=0,t.pixelX=t.x*ft,t.pixelY=t.y*ft,La(t))}}function La(e){var p;const t=Tt(),o=(p=t.tiles[e.y])==null?void 0:p[e.x],s=Wt(o);s.heal&&Ds();const a=Ha(t,e.x,e.y);if(a){Da(a);return}if(s.encounter&&s.encounterRate>0){const m=Ca(t,s.encounterRate);if(m){Ts(m);return}}}function Ha(e,t,o){return e.warps.find(s=>s.x===t&&s.y===o)||null}function Da(e){var a;const t=Ms(e.targetMap);if(!t){console.error(`Map not found: ${e.targetMap}`);return}const o=nt();go(t),o.x=e.targetX,o.y=e.targetY,o.pixelX=e.targetX*ft,o.pixelY=e.targetY*ft;const s=(a=t.tiles[o.y])==null?void 0:a[o.x];o.isSwimming=co(s)}function Pa(e){var w;const t=nt(),o=Tt();if(t.isMoving)return!1;t.facing=e;let s=t.x,a=t.y;switch(e){case"up":a--;break;case"down":a++;break;case"left":s--;break;case"right":s++;break}if(s<0||s>=o.width||a<0||a>=o.height)return!1;const p=(w=o.tiles[a])==null?void 0:w[s];if(p===void 0)return!1;const m=co(p);if(t.isSwimming&&!m){if(!Ct(p,!1))return!1}else if(!t.isSwimming&&m){if(!Ct(p,!0))return!1}else if(!Ct(p,t.isSwimming))return!1;return o.npcs.find(N=>N.x===s&&N.y===a)?!1:(t.x=s,t.y=a,t.isMoving=!0,t.moveProgress=0,t.isSwimming=m,!0)}function Ba(e,t,o){return e&&Pa(e),t?Wa():null}function Wa(){var p;const e=nt(),t=Tt();let o=e.x,s=e.y;switch(e.facing){case"up":s--;break;case"down":s++;break;case"left":o--;break;case"right":o++;break}const a=t.npcs.find(m=>m.x===o&&m.y===s);if(a){if(a.isPcTerminal)return"pc";if(a.shopId)return{type:"shop",shopId:a.shopId};a.trainer&&!a.defeated?(a.dialogue&&console.log(a.dialogue.join(`
`)),xs(a)):a.defeated&&((p=a.trainer)!=null&&p.defeatedDialogue)?console.log(a.trainer.defeatedDialogue.join(`
`)):a.dialogue&&console.log(a.dialogue.join(`
`))}return null}const I=D.WALL,d=D.FLOOR,Ot=D.HEAL,X=D.DOCK,U=D.WATER,_a=[[I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I],[I,d,d,d,d,d,I,d,d,d,d,d,d,I,d,d,d,d,d,I],[I,d,d,d,d,d,I,d,d,d,d,d,d,I,d,Ot,Ot,d,d,I],[I,d,d,d,d,d,I,d,d,d,d,d,d,I,d,Ot,Ot,d,d,I],[I,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,I],[I,I,I,d,I,I,I,I,I,d,I,I,I,I,I,d,I,I,I,I],[I,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,I],[I,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,I],[I,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,I],[I,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,I],[I,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,I],[I,I,I,I,I,I,d,d,d,d,d,d,d,d,I,I,I,I,I,I],[I,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,I],[I,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,I],[I,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,X,I],[I,I,I,I,I,I,I,I,I,d,d,I,I,I,I,I,I,I,I,I],[U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U],[U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U,U]],to={id:"research-station",name:"Reef Research Station",width:20,height:18,tiles:_a,warps:[{x:9,y:17,targetMap:"route-1",targetX:10,targetY:1},{x:10,y:17,targetMap:"route-1",targetX:10,targetY:1}],npcs:[{id:"professor",x:9,y:3,sprite:0,facing:"down",dialogue:["Welcome to the Reef Research Station!","Take good care of your shark partner."]},{id:"station-pc",x:14,y:2,sprite:1,facing:"down",isPcTerminal:!0,dialogue:["Shark Storage System","Press A to access."]}],encounterTable:[],isOutdoor:!1},L=D.WALL,c=D.WATER,ie=D.KELP,C=D.SAND,j=D.DEEP,Ya=[[L,L,L,L,L,L,L,L,L,C,C,L,L,L,L,L,L,L,L,L],[L,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,L],[L,C,C,c,c,c,ie,c,c,c,c,c,c,ie,c,c,C,C,C,L],[L,C,c,c,c,ie,ie,c,c,c,c,c,ie,ie,c,c,c,C,C,L],[L,C,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,C,L],[L,C,c,ie,c,c,c,c,c,c,c,c,c,c,c,c,ie,c,C,L],[L,C,c,ie,c,c,c,c,c,c,c,c,c,c,c,c,ie,c,C,L],[L,C,c,c,c,c,c,j,j,j,j,j,j,c,c,c,c,c,C,L],[L,C,c,c,c,c,j,j,j,j,j,j,j,j,c,c,c,c,C,L],[L,C,c,c,c,c,j,j,j,j,j,j,j,j,c,c,c,c,C,L],[L,C,c,c,c,c,c,j,j,j,j,j,j,c,c,c,c,c,C,L],[L,C,c,ie,c,c,c,c,c,c,c,c,c,c,c,c,ie,c,C,L],[L,C,c,ie,ie,c,c,c,c,c,c,c,c,c,c,ie,ie,c,C,L],[L,C,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,C,L],[L,C,c,c,ie,c,c,c,c,c,c,c,c,c,ie,c,c,c,C,L],[L,C,C,c,c,c,ie,c,c,c,c,c,ie,c,c,c,c,C,C,L],[L,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,L],[L,L,L,L,L,L,L,L,L,C,C,L,L,L,L,L,L,L,L,L]],Xa={id:"route-1",name:"Route 1 - The Shallows",width:20,height:18,tiles:Ya,warps:[{x:9,y:0,targetMap:"research-station",targetX:9,targetY:15},{x:10,y:0,targetMap:"research-station",targetX:10,targetY:15},{x:9,y:17,targetMap:"route-2",targetX:9,targetY:1},{x:10,y:17,targetMap:"route-2",targetX:10,targetY:1}],npcs:[],encounterTable:[{speciesId:4,minLevel:2,maxLevel:4,weight:40},{speciesId:7,minLevel:2,maxLevel:4,weight:40},{speciesId:10,minLevel:3,maxLevel:5,weight:20}],isOutdoor:!0},x=D.WALL,R=D.WATER,Oe=D.KELP,f=D.SAND,z=D.FLOOR,Me=D.DOCK,Na=[[x,x,x,x,x,x,x,x,x,f,f,x,x,x,x,x,x,x,x,x],[x,f,f,f,f,f,z,z,z,z,z,z,z,z,f,f,f,f,f,x],[x,f,f,f,f,z,z,z,z,z,z,z,z,z,z,f,f,f,f,x],[x,f,R,R,f,z,z,x,x,z,z,x,x,z,z,f,R,R,f,x],[x,f,R,Oe,R,f,z,x,x,z,z,x,x,z,f,R,Oe,R,f,x],[x,f,R,R,R,f,f,f,f,z,z,f,f,f,f,R,R,R,f,x],[x,f,f,R,Oe,R,f,f,f,z,z,f,f,f,R,Oe,R,f,f,x],[x,f,f,f,R,R,R,f,f,z,z,f,f,R,R,R,f,f,f,x],[x,f,f,f,f,R,Oe,R,f,Me,Me,f,R,Oe,R,f,f,f,f,x],[x,f,f,f,f,f,R,R,R,Me,Me,R,R,R,f,f,f,f,f,x],[x,f,f,f,R,R,Oe,R,R,Me,Me,R,R,Oe,R,R,f,f,f,x],[x,f,R,R,R,Oe,R,R,R,Me,Me,R,R,R,Oe,R,R,R,f,x],[x,f,R,Oe,R,R,R,R,f,Me,Me,f,R,R,R,R,Oe,R,f,x],[x,f,R,R,R,R,f,f,f,Me,Me,f,f,f,R,R,R,R,f,x],[x,f,f,R,Oe,f,f,f,f,z,z,f,f,f,f,Oe,R,f,f,x],[x,f,f,f,f,f,f,f,z,z,z,z,f,f,f,f,f,f,f,x],[x,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,x],[x,x,x,x,x,x,x,x,x,f,f,x,x,x,x,x,x,x,x,x]],$a={id:"route-2",name:"Route 2 - Coral Passage",width:20,height:18,tiles:Na,warps:[{x:9,y:0,targetMap:"route-1",targetX:9,targetY:16},{x:10,y:0,targetMap:"route-1",targetX:10,targetY:16},{x:9,y:17,targetMap:"coral-bay",targetX:9,targetY:1},{x:10,y:17,targetMap:"coral-bay",targetX:10,targetY:1}],npcs:[{id:"finner-grunt-1",x:9,y:5,sprite:1,facing:"down",dialogue:["Hey! You there!","We're Team Finner!","Fins mean money, kid.","Outta our way!"],trainer:{name:"Finner Grunt",team:[{speciesId:13,level:8}],defeatedDialogue:["Tch! You got lucky!","The boss won't be","happy about this..."],prizeMoney:160}},{id:"finner-grunt-2",x:10,y:5,sprite:1,facing:"down",dialogue:["Heh heh...","The boss has big plans.","These sharks are worth","a fortune on the market!"],trainer:{name:"Finner Grunt",team:[{speciesId:12,level:7},{speciesId:14,level:7}],defeatedDialogue:["Argh! Fine!","But Team Finner","will remember this!"],prizeMoney:140}}],encounterTable:[{speciesId:13,minLevel:4,maxLevel:6,weight:30},{speciesId:14,minLevel:4,maxLevel:6,weight:25},{speciesId:12,minLevel:5,maxLevel:7,weight:20},{speciesId:15,minLevel:5,maxLevel:7,weight:15},{speciesId:19,minLevel:6,maxLevel:8,weight:10}],isOutdoor:!0},M=D.WALL,u=D.WATER,ae=D.KELP,F=D.SAND,$=D.FLOOR,oe=D.DOCK,Ka=[[M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M],[M,F,F,$,$,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,$,$,F,F,M],[M,F,$,$,$,oe,u,u,ae,u,u,ae,u,u,oe,$,$,$,F,M],[$,$,$,F,u,u,u,ae,u,u,u,u,ae,u,u,u,F,$,$,$],[$,$,F,u,u,ae,u,u,u,u,u,u,u,u,ae,u,u,F,$,$],[M,F,u,u,ae,u,u,M,M,M,M,M,M,u,u,ae,u,u,F,M],[M,F,u,ae,u,u,u,M,$,$,$,$,M,u,u,u,ae,u,F,M],[M,u,u,u,u,u,u,M,M,M,M,M,M,u,u,u,u,u,u,M],[M,u,ae,u,u,u,u,u,u,u,u,u,u,u,u,u,u,ae,u,M],[M,u,u,u,ae,u,u,u,u,u,u,u,u,u,u,ae,u,u,u,M],[M,F,u,ae,u,u,u,u,u,u,u,u,u,u,u,u,ae,u,F,M],[M,F,u,u,u,ae,u,u,u,u,u,u,u,u,ae,u,u,u,F,M],[M,F,F,u,u,u,u,ae,u,u,u,u,ae,u,u,u,u,F,F,M],[M,F,F,F,u,u,ae,u,u,oe,oe,u,u,ae,u,u,F,F,F,M],[M,F,F,$,$,u,u,u,u,oe,oe,u,u,u,u,$,$,F,F,M],[M,F,$,$,$,$,oe,oe,oe,oe,oe,oe,oe,oe,$,$,$,$,F,M],[M,F,F,$,$,$,$,$,$,$,$,$,$,$,$,$,$,F,F,M],[M,M,M,F,F,M,M,M,M,M,M,M,M,M,M,F,F,M,M,M]],Fa={id:"route-3",name:"Route 3 - Coral Reef Pass",width:20,height:18,tiles:Ka,warps:[{x:0,y:3,targetMap:"coral-bay",targetX:18,targetY:5},{x:0,y:4,targetMap:"coral-bay",targetX:18,targetY:6},{x:19,y:3,targetMap:"kelp-harbor",targetX:1,targetY:9},{x:19,y:4,targetMap:"kelp-harbor",targetX:1,targetY:10}],npcs:[{id:"route3-fisher",x:5,y:3,sprite:0,facing:"down",dialogue:["The waters here are","full of life!","Let me show you what","I've caught!"],trainer:{name:"Fisher Finn",team:[{speciesId:28,level:10},{speciesId:13,level:10}],defeatedDialogue:["Nice battling!","The reef has many","strong sharks."],prizeMoney:320}},{id:"route3-swimmer",x:10,y:9,sprite:0,facing:"left",dialogue:["I love swimming with","the spinner sharks!","They're so graceful!"],trainer:{name:"Swimmer Coral",team:[{speciesId:19,level:12}],defeatedDialogue:["Wow, you're strong!","Keep heading east to","reach Kelp Harbor."],prizeMoney:240}},{id:"route3-diver",x:14,y:12,sprite:0,facing:"up",dialogue:["I dive deep to find","rare sharks!","Want to see what I","discovered?"],trainer:{name:"Diver Deep",team:[{speciesId:12,level:11},{speciesId:18,level:11}],defeatedDialogue:["Your sharks are","impressive!","Good luck at the gym!"],prizeMoney:352}},{id:"finner-cave-guard1",x:8,y:6,sprite:1,facing:"down",dialogue:["Hey! This cave is","off limits!","Team Finner business.","Scram, kid!"]},{id:"finner-cave-guard2",x:11,y:6,sprite:1,facing:"down",dialogue:["Nothing to see here!","Just some... uh...","cave exploration!","Yeah, that's it!"]},{id:"route3-info",x:3,y:15,sprite:0,facing:"right",dialogue:["Kelp Harbor is east!","They have an Electric","type gym there.","Captain Volt is tough!"]}],encounterTable:[{speciesId:13,minLevel:8,maxLevel:11,weight:30},{speciesId:28,minLevel:8,maxLevel:11,weight:25},{speciesId:19,minLevel:10,maxLevel:12,weight:20},{speciesId:18,minLevel:9,maxLevel:11,weight:15},{speciesId:15,minLevel:10,maxLevel:12,weight:10}],isOutdoor:!0},h=D.WALL,y=D.FLOOR,G=D.SAND,fe=D.WATER,Te=D.HEAL,Q=D.DOCK,Ga=[[h,h,h,h,h,h,h,h,h,y,y,h,h,h,h,h,h,h,h,h],[h,y,y,y,y,y,h,h,h,y,y,h,h,h,y,y,y,y,y,h],[h,y,h,h,h,y,h,Te,Te,Te,Te,Te,Te,h,y,h,h,h,y,h],[h,y,h,h,h,y,h,Te,Te,Te,Te,Te,Te,h,y,h,h,h,y,h],[h,y,y,y,y,y,h,h,h,y,y,h,h,h,y,y,y,y,y,h],[h,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[h,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[h,y,y,y,h,h,h,h,h,h,h,h,h,h,h,h,y,y,y,h],[h,y,y,y,h,h,h,h,h,h,h,h,h,h,h,h,y,y,y,h],[h,y,y,y,h,h,h,h,h,y,y,h,h,h,h,h,y,y,y,h],[h,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,h],[h,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,h],[h,G,G,G,G,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,G,G,G,G,h],[h,G,G,fe,fe,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,fe,fe,G,G,h],[h,G,fe,fe,fe,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,fe,fe,fe,G,h],[h,G,fe,fe,fe,fe,G,G,G,G,G,G,G,G,fe,fe,fe,fe,G,h],[h,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,h],[h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h]],Ua={id:"coral-bay",name:"Coral Bay Town",width:20,height:18,tiles:Ga,warps:[{x:9,y:0,targetMap:"route-2",targetX:9,targetY:16},{x:10,y:0,targetMap:"route-2",targetX:10,targetY:16},{x:9,y:9,targetMap:"coral-gym",targetX:9,targetY:16},{x:10,y:9,targetMap:"coral-gym",targetX:10,targetY:16},{x:19,y:5,targetMap:"route-3",targetX:1,targetY:3},{x:19,y:6,targetMap:"route-3",targetX:1,targetY:4}],npcs:[{id:"coral-welcome",x:6,y:6,sprite:0,facing:"right",dialogue:["Welcome to Coral Bay!","Our town is famous for","beautiful coral reefs.","The Gym Leader Marina","uses Psychic types!"]},{id:"coral-nurse",x:10,y:3,sprite:0,facing:"down",dialogue:["Welcome to the Shark Center!","Step on the healing pool","to restore your team.","We'll take care of them!"]},{id:"coral-pc",x:8,y:2,sprite:1,facing:"down",isPcTerminal:!0,dialogue:["Shark Storage System","Press A to access."]},{id:"coral-info",x:13,y:10,sprite:0,facing:"left",dialogue:["Marina is tough!","Her Hammerhead can","predict your moves.","Watch out for Psychic!"]},{id:"coral-shop",x:16,y:3,sprite:0,facing:"down",shopId:"coral-bay",dialogue:["Welcome to Coral Market!","We have everything a","shark trainer needs!"]}],encounterTable:[],isOutdoor:!0},T=D.WALL,r=D.FLOOR,J=D.WATER,za=[[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T],[T,r,r,J,J,J,r,r,r,r,r,r,r,r,J,J,J,r,r,T],[T,r,r,J,J,J,r,r,r,r,r,r,r,r,J,J,J,r,r,T],[T,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T],[T,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T],[T,r,J,J,r,r,r,r,r,r,r,r,r,r,r,r,J,J,r,T],[T,r,J,J,r,r,r,r,r,r,r,r,r,r,r,r,J,J,r,T],[T,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T],[T,r,r,r,r,r,T,T,r,r,r,r,T,T,r,r,r,r,r,T],[T,r,r,r,r,r,T,T,r,r,r,r,T,T,r,r,r,r,r,T],[T,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T],[T,r,J,J,r,r,r,r,r,r,r,r,r,r,r,r,J,J,r,T],[T,r,J,J,r,r,r,r,r,r,r,r,r,r,r,r,J,J,r,T],[T,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T],[T,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T],[T,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,T],[T,T,T,T,T,T,T,T,T,r,r,T,T,T,T,T,T,T,T,T]],qa={id:"coral-gym",name:"Coral Gym",width:20,height:18,tiles:za,warps:[{x:9,y:17,targetMap:"coral-bay",targetX:9,targetY:10},{x:10,y:17,targetMap:"coral-bay",targetX:10,targetY:10}],npcs:[{id:"gym-leader-marina",x:9,y:3,sprite:2,facing:"down",dialogue:["I am Marina, leader of","the Coral Bay Gym!","My Psychic sharks can","sense your every move.","Let's see if you can","outsmart my Hammerhead!"],trainer:{name:"Leader Marina",team:[{speciesId:10,level:12},{speciesId:11,level:14}],defeatedDialogue:["Incredible!","Your bond with your","shark is strong.","Take this Reef Badge","as proof of victory!"],prizeMoney:1400}},{id:"gym-trainer-1",x:6,y:9,sprite:0,facing:"right",dialogue:["Training Psychic types","requires a calm mind.","Can you stay focused?"],trainer:{name:"Swimmer Kai",team:[{speciesId:10,level:10}],defeatedDialogue:["You broke my focus!","Marina will avenge me."],prizeMoney:200}},{id:"gym-trainer-2",x:13,y:9,sprite:0,facing:"left",dialogue:["Marina taught me","everything I know!","You won't get past me!"],trainer:{name:"Swimmer Nami",team:[{speciesId:10,level:9},{speciesId:18,level:9}],defeatedDialogue:["I still have much","to learn..."],prizeMoney:180}}],encounterTable:[],isOutdoor:!1},b=D.WALL,v=D.FLOOR,et=D.SAND,P=D.WATER,Fe=D.KELP,it=D.HEAL,B=D.DOCK,Je=[[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,b],[b,v,b,b,b,v,v,b,b,b,b,b,b,v,v,b,b,b,v,b],[b,v,b,b,b,v,v,b,b,b,b,b,b,v,v,b,b,b,v,b],[b,v,v,v,v,v,v,b,b,v,v,b,b,v,v,v,v,v,v,b],[b,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,b],[b,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,b],[b,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,b],[b,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,b],[v,v,v,B,B,B,B,B,B,B,B,B,B,B,B,B,B,v,v,v],[v,v,v,B,B,B,B,B,B,B,B,B,B,B,B,B,B,v,v,v],[b,et,et,B,B,B,B,B,B,B,B,B,B,B,B,B,B,et,et,b],[b,et,P,P,P,B,B,B,B,B,B,B,B,B,B,P,P,P,et,b],[b,P,P,Fe,P,P,B,B,B,B,B,B,B,B,P,P,Fe,P,P,b],[b,P,Fe,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Fe,P,b],[b,P,P,P,Fe,P,P,P,Fe,P,P,Fe,P,P,P,Fe,P,P,P,b],[b,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]];Je[2][15]=it;Je[2][16]=it;Je[2][17]=it;Je[3][15]=it;Je[3][16]=it;Je[3][17]=it;const Za={id:"kelp-harbor",name:"Kelp Harbor Town",width:20,height:18,tiles:Je,warps:[{x:0,y:9,targetMap:"route-3",targetX:18,targetY:3},{x:0,y:10,targetMap:"route-3",targetX:18,targetY:4},{x:19,y:9,targetMap:"route-4",targetX:1,targetY:9},{x:19,y:10,targetMap:"route-4",targetX:1,targetY:10},{x:9,y:4,targetMap:"kelp-gym",targetX:9,targetY:16},{x:10,y:4,targetMap:"kelp-gym",targetX:10,targetY:16}],npcs:[{id:"harbor-shop",x:3,y:3,sprite:0,facing:"down",shopId:"kelp-harbor",dialogue:["Welcome to Harbor Mart!","We have a great selection","for serious trainers!"]},{id:"harbor-pc",x:15,y:2,sprite:1,facing:"down",isPcTerminal:!0,dialogue:["Shark Storage System","Press A to access."]},{id:"harbor-nurse",x:17,y:3,sprite:0,facing:"down",dialogue:["Welcome to Kelp Harbor","Shark Center!","Your sharks look tired.","Use the healing pool!"]},{id:"harbor-gymguide",x:7,y:5,sprite:0,facing:"right",dialogue:["Captain Volt runs the","Electric-type gym here.","His Lanternsharks are","shockingly powerful!","Watch out for paralysis!"]},{id:"harbor-fisher",x:10,y:11,sprite:0,facing:"down",dialogue:["I've been seeing some","suspicious folks east","of here on Route 4.","They wear matching","uniforms... Team Finner?"]},{id:"harbor-sailor",x:5,y:9,sprite:0,facing:"down",dialogue:["Ahoy! This harbor used","to be busier before","Team Finner showed up.","They're bad for business!"]},{id:"harbor-welcome",x:12,y:7,sprite:0,facing:"left",dialogue:["Welcome to Kelp Harbor!","We're a fishing town","with a proud tradition.","The kelp forests nearby","are beautiful!"]},{id:"harbor-kid",x:3,y:7,sprite:0,facing:"right",dialogue:["Did you know Torpedo","Rays can shock you?","Captain Volt has one!","It's super cool!"]}],encounterTable:[],isOutdoor:!0},E=D.WALL,n=D.FLOOR,K=D.WATER,Qa=[[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,E],[E,n,n,K,n,n,n,n,n,n,n,n,n,n,n,n,K,n,n,E],[E,n,n,K,K,n,n,n,n,n,n,n,n,n,n,K,K,n,n,E],[E,n,n,n,K,K,n,n,n,n,n,n,n,n,K,K,n,n,n,E],[E,n,n,n,n,K,K,n,n,n,n,n,n,K,K,n,n,n,n,E],[E,n,n,n,n,n,K,K,K,n,n,K,K,K,n,n,n,n,n,E],[E,n,n,n,n,n,n,n,K,K,K,K,n,n,n,n,n,n,n,E],[E,n,n,n,n,n,n,n,n,K,K,n,n,n,n,n,n,n,n,E],[E,n,n,n,n,n,n,n,K,K,K,K,n,n,n,n,n,n,n,E],[E,n,n,n,n,n,K,K,K,n,n,K,K,K,n,n,n,n,n,E],[E,n,n,n,n,K,K,n,n,n,n,n,n,K,K,n,n,n,n,E],[E,n,n,n,K,K,n,n,n,n,n,n,n,n,K,K,n,n,n,E],[E,n,n,K,K,n,n,n,n,n,n,n,n,n,n,K,K,n,n,E],[E,n,n,K,n,n,n,n,n,n,n,n,n,n,n,n,K,n,n,E],[E,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,E],[E,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,E],[E,E,E,E,E,E,E,E,E,n,n,E,E,E,E,E,E,E,E,E]],Va={id:"kelp-gym",name:"Kelp Harbor Gym",width:20,height:18,tiles:Qa,warps:[{x:9,y:17,targetMap:"kelp-harbor",targetX:9,targetY:5},{x:10,y:17,targetMap:"kelp-harbor",targetX:10,targetY:5}],npcs:[{id:"gym-leader-volt",x:9,y:3,sprite:2,facing:"down",dialogue:["Ahoy, challenger!","I'm Captain Volt,","master of Electric sharks!","In my sailing days, I","studied the shocking","power of Lanternsharks.","Now let's see if you","can weather my storm!"],trainer:{name:"Captain Volt",team:[{speciesId:15,level:18},{speciesId:26,level:19},{speciesId:32,level:21}],defeatedDialogue:["Blimey! You've got","the spark of a true","champion!","Take this Harbor Badge.","It's proof you survived","my electric onslaught!","Here, take this TM too.","It's Thunderbolt!"],prizeMoney:2100}},{id:"kelp-gym-trainer-1",x:4,y:7,sprite:0,facing:"right",dialogue:["The captain taught us","to harness electricity!","Feel the shock!"],trainer:{name:"Sailor Sparks",team:[{speciesId:15,level:16},{speciesId:15,level:16}],defeatedDialogue:["Zapped out...","You're tougher than","you look!"],prizeMoney:512}},{id:"kelp-gym-trainer-2",x:15,y:7,sprite:0,facing:"left",dialogue:["Torpedo Rays are the","most shocking creatures","in the sea!","Want to find out why?"],trainer:{name:"Sailor Bolt",team:[{speciesId:26,level:17}],defeatedDialogue:["My ray ran out of","charge...","Good luck with the","captain!"],prizeMoney:544}},{id:"kelp-gym-trainer-3",x:9,y:11,sprite:0,facing:"up",dialogue:["I'm the last line","of defense before","Captain Volt!","Prepare for a shock!"],trainer:{name:"Sailor Storm",team:[{speciesId:15,level:15},{speciesId:26,level:16},{speciesId:15,level:15}],defeatedDialogue:["The storm has passed...","But the captain is","even stronger!"],prizeMoney:480}},{id:"kelp-gym-guide",x:5,y:15,sprite:0,facing:"right",dialogue:["Welcome to Kelp Gym!","Captain Volt uses","Electric-type sharks.","Ground types are immune","to Electric attacks!","Good luck, challenger!"]}],encounterTable:[],isOutdoor:!1},H=D.WALL,l=D.WATER,re=D.KELP,W=D.SAND,Ge=D.FLOOR,ye=D.DOCK,ja=[[H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H],[H,W,W,W,W,W,W,W,ye,ye,ye,ye,W,W,W,W,W,W,W,H],[H,W,W,l,l,l,W,W,ye,ye,ye,ye,W,W,l,l,l,W,W,H],[H,W,l,l,re,l,l,W,ye,ye,ye,ye,W,l,l,re,l,l,W,H],[H,W,l,re,l,l,l,l,ye,ye,ye,ye,l,l,l,l,re,l,W,H],[H,l,l,l,l,re,l,l,l,l,l,l,l,l,re,l,l,l,l,H],[H,l,re,l,l,l,l,l,l,l,l,l,l,l,l,l,l,re,l,H],[H,l,l,l,l,l,re,l,l,l,l,l,l,re,l,l,l,l,l,H],[H,l,l,re,l,l,l,l,l,l,l,l,l,l,l,l,re,l,l,H],[Ge,Ge,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,Ge,Ge],[Ge,Ge,l,l,re,l,l,l,l,l,l,l,l,l,l,re,l,l,Ge,Ge],[H,l,l,l,l,l,l,re,l,l,l,l,re,l,l,l,l,l,l,H],[H,l,re,l,l,l,l,l,l,l,l,l,l,l,l,l,l,re,l,H],[H,W,l,l,l,re,l,l,l,l,l,l,l,l,re,l,l,l,W,H],[H,W,W,l,l,l,l,re,l,l,l,l,re,l,l,l,l,W,W,H],[H,W,W,W,l,l,l,l,l,l,l,l,l,l,l,l,W,W,W,H],[H,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,H],[H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H]],Ja={id:"route-4",name:"Route 4 - Harbor Shallows",width:20,height:18,tiles:ja,warps:[{x:0,y:9,targetMap:"kelp-harbor",targetX:18,targetY:9},{x:0,y:10,targetMap:"kelp-harbor",targetX:18,targetY:10},{x:19,y:9,targetMap:"finner-hq",targetX:1,targetY:15},{x:19,y:10,targetMap:"finner-hq",targetX:1,targetY:16}],npcs:[{id:"route4-fisher1",x:10,y:2,sprite:0,facing:"down",dialogue:["The fishing used to be","great here...","But Team Finner scared","all the sharks away!"],trainer:{name:"Fisher Wade",team:[{speciesId:15,level:14},{speciesId:14,level:14}],defeatedDialogue:["Good battle!","Be careful heading","east... Finners there."],prizeMoney:448}},{id:"route4-swimmer",x:6,y:7,sprite:0,facing:"right",dialogue:["I saw some shady guys","in matching outfits","heading to that old","warehouse to the east."],trainer:{name:"Swimmer Reef",team:[{speciesId:19,level:15},{speciesId:28,level:15}],defeatedDialogue:["Nice sharks!","You might be able to","stop those crooks!"],prizeMoney:300}},{id:"route4-diver",x:14,y:12,sprite:0,facing:"left",dialogue:["That building ahead","is Team Finner's base!","They're capturing sharks","for their fins!","Someone needs to stop them!"],trainer:{name:"Diver Marina",team:[{speciesId:20,level:16},{speciesId:15,level:15},{speciesId:18,level:15}],defeatedDialogue:["You're strong!","Please, go stop those","Finners!"],prizeMoney:512}},{id:"route4-warning",x:16,y:9,sprite:0,facing:"left",dialogue:["Warning: Team Finner","activity reported ahead.","Proceed with caution!"]}],encounterTable:[{speciesId:15,minLevel:12,maxLevel:15,weight:30},{speciesId:26,minLevel:13,maxLevel:16,weight:20},{speciesId:19,minLevel:12,maxLevel:15,weight:20},{speciesId:17,minLevel:14,maxLevel:16,weight:15},{speciesId:32,minLevel:15,maxLevel:17,weight:10},{speciesId:21,minLevel:16,maxLevel:18,weight:5}],isOutdoor:!0},g=D.WALL,i=D.FLOOR,ue=D.WATER,se=D.DOCK,er=[[g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g],[g,i,i,i,i,i,i,g,g,i,i,g,g,i,i,i,i,i,i,g],[g,i,se,se,i,i,i,g,ue,ue,ue,ue,g,i,i,i,se,se,i,g],[g,i,se,se,i,i,i,g,ue,ue,ue,ue,g,i,i,i,se,se,i,g],[g,i,i,i,i,i,i,g,g,i,i,g,g,i,i,i,i,i,i,g],[g,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,g],[g,g,g,g,i,i,i,i,i,i,i,i,i,i,i,i,g,g,g,g],[g,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,g],[g,i,se,se,se,i,i,g,g,g,g,g,g,i,i,se,se,se,i,g],[g,i,se,ue,se,i,i,g,ue,ue,ue,ue,g,i,i,se,ue,se,i,g],[g,i,se,se,se,i,i,g,ue,ue,ue,ue,g,i,i,se,se,se,i,g],[g,i,i,i,i,i,i,g,g,g,g,g,g,i,i,i,i,i,i,g],[g,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,g],[g,g,g,g,i,i,i,i,i,i,i,i,i,i,i,i,g,g,g,g],[g,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,g],[g,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,g],[g,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,g],[g,g,g,g,g,g,g,g,g,i,i,g,g,g,g,g,g,g,g,g]],tr={id:"finner-hq",name:"Team Finner HQ",width:20,height:18,tiles:er,warps:[{x:9,y:17,targetMap:"route-4",targetX:18,targetY:9},{x:10,y:17,targetMap:"route-4",targetX:18,targetY:10}],npcs:[{id:"finner-grunt-hq1",x:9,y:14,sprite:1,facing:"down",dialogue:["Hey! How did you","get in here?!","This is Team Finner","territory!"],trainer:{name:"Finner Grunt",team:[{speciesId:13,level:14}],defeatedDialogue:["Ugh! Fine!","But the others will","stop you!"],prizeMoney:280}},{id:"finner-grunt-hq2",x:4,y:12,sprite:1,facing:"right",dialogue:["We're going to be","rich selling these fins!","You can't stop us!"],trainer:{name:"Finner Grunt",team:[{speciesId:12,level:13},{speciesId:28,level:13}],defeatedDialogue:["This isn't over!","The Admin will","deal with you!"],prizeMoney:260}},{id:"finner-grunt-hq3",x:15,y:12,sprite:1,facing:"left",dialogue:["Heh heh...","Those sharks in the","tanks are worth a","fortune!"],trainer:{name:"Finner Grunt",team:[{speciesId:13,level:15},{speciesId:13,level:15}],defeatedDialogue:["Argh! You're","tougher than you look!"],prizeMoney:300}},{id:"finner-grunt-hq4",x:10,y:7,sprite:1,facing:"down",dialogue:["These sharks are","our meal ticket!","I won't let you","free them!"],trainer:{name:"Finner Grunt",team:[{speciesId:21,level:16}],defeatedDialogue:["No way!","You beat my Bull Shark?!","The Admin won't like this..."],prizeMoney:320}},{id:"finner-admin",x:10,y:5,sprite:2,facing:"down",dialogue:["So you're the brat","causing trouble?","I'm Admin Sawyer.","I handle acquisitions","for Team Finner.","These sharks belong","to us now!"],trainer:{name:"Admin Sawyer",team:[{speciesId:25,level:18},{speciesId:21,level:18},{speciesId:22,level:19}],defeatedDialogue:["Impossible!","Fine... but the Boss","will crush you!","Boss Finley is in","the back office!"],prizeMoney:1200}},{id:"finner-boss",x:10,y:2,sprite:2,facing:"down",dialogue:["Hah! A child?","I am Boss Finley,","leader of Team Finner!","These fins will make","me rich beyond measure!","No one can stop my","fin harvesting operation!","Prepare to lose!"],trainer:{name:"Boss Finley",team:[{speciesId:21,level:20},{speciesId:20,level:20},{speciesId:24,level:22}],defeatedDialogue:["NO! This can't be!","My beautiful operation!","Team Finner... retreat!","We'll be back!","Those sharks are yours","for now, brat!","But this isn't over!"],prizeMoney:2500}},{id:"captured-shark-1",x:3,y:9,sprite:0,facing:"down",dialogue:["A rare Manta Ray is","trapped in this cage!","It looks scared..."]},{id:"captured-shark-2",x:16,y:9,sprite:0,facing:"down",dialogue:["A Sawshark is being","held captive here!","Its saw looks valuable..."]}],encounterTable:[],isOutdoor:!1};let oo=0,It=0;function so(){xo(),Sa(),qs(),Ss(),De(to),De(Xa),De($a),De(Fa),De(Ua),De(qa),De(Za),De(Va),De(Ja),De(tr),go(to);const e=nt();e.x=10,e.y=10,e.pixelX=e.x*8,e.pixelY=e.y*8,Ks(),ke("starter-select"),requestAnimationFrame(So)}function So(e){const t=e-oo;oo=e,or(t),pr(),Ma(),requestAnimationFrame(So)}function or(e){const t=vo();t==="overworld"?sr():t==="battle"?ar(e):t==="party-menu"?nr():t==="battle-party"?ir():t==="starter-select"?rr():t==="pc"?lr():t==="shop"?cr():t==="tm"&&dr()}function sr(e){Ea();const t=Ke(),o=Ze();if(t.start){fo(),ke("party-menu");return}const s=Ba(o,t.a);if(s==="pc")ta(),ke("pc");else if(s&&typeof s=="object"&&s.type==="shop"){const a=Aa(s.shopId);a&&(la(a),ke("shop"))}}function ar(e){const t=Yt();if(!t){ke("overworld");return}if(!bt())for(It+=e;It>=Gt;)It-=Gt,zt();ks(t,e);const o=Ke(),s=Ze();if(s&&Lt(t,s),o.a)if(bt())Lt(t,"a");else for(;!bt();)zt();o.b&&Lt(t,"b"),(t.phase==="victory"||t.phase==="defeat")&&(o.a||o.b)&&(Hs(),It=0)}function rr(){const e=Ke(),t=Ze();let o=null;if(t==="left"?o="left":t==="right"?o="right":e.a?o="a":e.b&&(o="b"),o&&Gs(o)==="select"){const a=Fs();Ws(a),ke("overworld")}}function nr(){const e=Ke(),t=Ze();let o=null;t?o=t:e.a?o="a":e.b&&(o="b"),o&&cs(o)==="close"&&ke("overworld")}function ir(){const e=Ke(),t=Ze();let o=null;if(t?o=t:e.a?o="a":e.b&&(o="b"),o){const s=ds(o);if(s){if(s.action==="close")ke("battle");else if(s.action==="switch"&&s.index!==void 0){const a=Le(),p=a[0];a[0]=a[s.index],a[s.index]=p;const m=Yt();m&&(m.playerCreature=a[0],m.animatingHp.player=a[0].currentHp,m.messageQueue.push(`Go! ${a[0].species.name}!`),m.phase="message",m.messageQueue.length>0&&(m.message=m.messageQueue.shift())),ke("battle")}}}}function lr(){const e=Ke(),t=Ze();let o=null;t?o=t:e.a?o="a":e.b?o="b":e.l?o="l":e.r&&(o="r"),o&&oa(o)==="close"&&ke("overworld")}function cr(){const e=Ke(),t=Ze();let o=null;t?o=t:e.a?o="a":e.b&&(o="b"),o&&ca(o)==="close"&&ke("overworld")}function dr(){const e=Ke(),t=Ze();let o=null;if(t?o=t:e.a?o="a":e.b&&(o="b"),o){const s=ha(o);(s==="close"||s==="used")&&ke("party-menu")}}function pr(){const e=vo();if(e==="overworld")_s();else if(e==="battle"){const t=Yt();t&&_o(t)}else e==="party-menu"?Vt(!1):e==="battle-party"?Vt(!0):e==="starter-select"?Us():e==="pc"?ia():e==="shop"?ma():e==="tm"&&ya();Co()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",so):so();
